{"version":3,"file":"bundle.js","sources":["../../src/GameConfig.ts","../../src/EventManager.ts","../../src/SingletonMainScene.ts","../../src/GlobalConfig.ts","../../src/Common/CameraMoveScript.ts","../../src/Lib/J3_BlinnPhone.ts","../../src/Lib/J3_DiffBlinnPhone.ts","../../src/SingletonScene.ts","../../src/Scene/J3_BlinnPhone_Scene.ts","../../src/Lib/J4_DiffuseTexture.ts","../../src/Scene/J4_DiffuseTexture_Scene.ts","../../src/Lib/J3_DiffusePixe.ts","../../src/Lib/J3_DiffuseVertex.ts","../../src/Scene/J3_DiffusePixe_Scene.ts","../../src/Lib/J4_NormalTexture.ts","../../src/Scene/J4_NormalTexture_Scene.ts","../../src/Lib/J5_AlphaBlending.ts","../../src/Scene/J5_AlphaBlending_Scene.ts","../../src/Lib/J6_LightMap.ts","../../src/Scene/J6_LightMap_Scene.ts","../../src/Scene/J6_Shadow_Scene.ts","../../src/Lib/J7_AnimUV.ts","../../src/Scene/J7_AnimUV_Scene.ts","../../src/Lib/J8_MatCap.ts","../../src/Lib/J8_MatCapAudi.ts","../../src/Scene/J8_MatCap_Scene.ts","../../src/Lib/J8_Reflect.ts","../../src/Scene/J8_Reflect_Scene.ts","../../src/Scene/J9_PostProcess_Scene.ts","../../src/LayaMainShader.ts","../../src/Main.ts"],"sourcesContent":["/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\r\n\r\n/*\r\n* 游戏初始化配置;\r\n*/\r\nexport default class GameConfig{\r\n    static width:number=640;\r\n    static height:number=1136;\r\n    static scaleMode:string=\"fixedwidth\";\r\n    static screenMode:string=\"none\";\r\n    static alignV:string=\"top\";\r\n    static alignH:string=\"left\";\r\n    static startScene:any=\"\";\r\n    static sceneRoot:string=\"\";\r\n    static debug:boolean=false;\r\n    static stat:boolean=false;\r\n    static physicsDebug:boolean=false;\r\n    static exportSceneToJson:boolean=true;\r\n    constructor(){}\r\n    static init(){\r\n        var reg: Function = Laya.ClassUtils.regClass;\r\n\r\n    }\r\n}\r\nGameConfig.init();","export const enum EventType {\r\n    /**测试事件 */\r\n    TESTEVENT = \"TEST_EVENT\",\r\n    /**返回主页 */\r\n    BACKTOMAIN = \"BACKTOMAIN\",\r\n    /**设置scene */\r\n    SETSCENE3D = \"SETSCENE3D\",\r\n}\r\n\r\nexport class EventExtra {\r\n    // handler列表\r\n    private _handerList: Array<Laya.Handler>;\r\n\r\n    constructor() {\r\n        this._handerList = new Array<Laya.Handler>();\r\n    }\r\n\r\n    public Add(handler: Laya.Handler): void {\r\n        this._handerList.push(handler);\r\n    }\r\n\r\n    public Remove(handler: Laya.Handler): void {\r\n        for (let i: number = 0; i < this._handerList.length; i++) {\r\n            if (handler.caller == this._handerList[i].caller && handler.method == this._handerList[i].method) {\r\n                this._handerList[i].recover();\r\n                this._handerList.splice(i, 1);\r\n                handler.recover();\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    public Exec(args: any[]): void {\r\n        for (let i: number = this._handerList.length; i >= 0; i--) {\r\n            let handler: Laya.Handler = this._handerList[i];\r\n            if (handler != null) {\r\n                try {\r\n                    handler.setTo(handler.caller, handler.method, args, false);\r\n                    //  如果run 中出现异常 for 会停止  其他的类注册的事件则不会走\r\n                    handler.run();\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport class EventManager {\r\n    //事件列表\r\n    private static eventMap: Map<string, EventExtra> = new Map();\r\n\r\n    /**\r\n     * 派发事件\r\n     * @param type 消息类型\r\n     * @param args 额外参数\r\n     */\r\n    public static DispatchEvent(type: string, args?: any): void {\r\n        if (!(args instanceof Array))\r\n            args = [args];\r\n\r\n        let e: EventExtra | undefined = EventManager.eventMap.get(type);\r\n        if (e != null || e != undefined) {\r\n            try {\r\n                e.Exec(args);\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 注册事件\r\n     * @param type 消息类型\r\n     * @param handler 回调函数\r\n     */\r\n    public static RegistEvent(type: string, handler: Laya.Handler): void {\r\n        let e: EventExtra | undefined = EventManager.eventMap.get(type);\r\n        if (e == null || e == undefined) {\r\n            e = new EventExtra();\r\n            EventManager.eventMap.set(type, e);\r\n        }\r\n        e.Add(handler);\r\n    }\r\n\r\n    /**\r\n     * 删除事件\r\n     * @param type 消息类型\r\n     * @param handler 回调函数\r\n     */\r\n    public static RemoveEvent(type: string, handler: Laya.Handler): void {\r\n        let e: EventExtra | undefined = EventManager.eventMap.get(type);\r\n        if (e != undefined && handler != null) {\r\n            e.Remove(handler);\r\n        }\r\n    }\r\n}","import { EventManager, EventType } from \"./EventManager\";\r\n\r\n/**\r\n * 功能场景(按钮控制)(单例)\r\n */\r\nexport default abstract class SingletonMainScene extends Laya.Scene {\r\n    /**\r\n     * 构造函数\r\n     */\r\n    constructor() {\r\n        super();\r\n        // 注册事件\r\n        EventManager.RegistEvent(EventType.BACKTOMAIN, Laya.Handler.create(this, this.Back2Main));\r\n    }\r\n    \r\n    /**\r\n     *\r\n     * @param this 单例\r\n     * @returns\r\n     */\r\n    static getInstance<T extends {}>(this: new () => T): T {\r\n        if (!(<any>this).instance) {\r\n            (<any>this).instance = new this();\r\n        }\r\n        return (<any>this).instance;\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    Show(): void {\r\n        this.visible = true;\r\n    }\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    Hide(): void {\r\n        this.visible = false;\r\n    }\r\n\r\n    /**\r\n     * 销毁\r\n     */\r\n    Destroy(): void {\r\n        if (this != null) {\r\n            this.destroy();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 返回主页 隐藏当前页面\r\n     */\r\n    public Back2Main() {\r\n        this.Hide();\r\n    }\r\n}\r\n","export module GlobalConfig {\r\n    export let ResPath = \"https://layaair.ldc.layabox.com/demo2/h5/\";\r\n}","export class CameraMoveScript extends Laya.Script3D {\r\n    _tempVector3: any;\r\n    yawPitchRoll: any;\r\n    resultRotation: any;\r\n    tempRotationZ: any;\r\n    tempRotationX: any;\r\n    tempRotationY: any;\r\n    rotaionSpeed: any;\r\n    camera: any;\r\n    mouseDown: any;\r\n    lastMouseX: any;\r\n    lastMouseY: any;\r\n    isMouseDown: any;\r\n\r\n    constructor() {\r\n        super();\r\n        this._tempVector3 = new Laya.Vector3();\r\n        this.yawPitchRoll = new Laya.Vector3();\r\n        this.resultRotation = new Laya.Quaternion();\r\n        this.tempRotationZ = new Laya.Quaternion();\r\n        this.tempRotationX = new Laya.Quaternion();\r\n        this.tempRotationY = new Laya.Quaternion();\r\n        this.rotaionSpeed = 0.00006;\r\n    }\r\n\r\n    onAwake() {\r\n        Laya.stage.on(Laya.Event.RIGHT_MOUSE_DOWN, this, this.mouseDown);\r\n        Laya.stage.on(Laya.Event.RIGHT_MOUSE_UP, this, this.mouseUp);\r\n        this.camera = this.owner;\r\n    }\r\n\r\n    _onDestroy() {\r\n        //关闭监听函数\r\n        Laya.stage.off(Laya.Event.RIGHT_MOUSE_DOWN, this, this.mouseDown);\r\n        Laya.stage.off(Laya.Event.RIGHT_MOUSE_UP, this, this.mouseUp);\r\n    }\r\n\r\n    onUpdate() {\r\n        var elapsedTime = Laya.timer.delta;\r\n        if (!isNaN(this.lastMouseX) && !isNaN(this.lastMouseY) && this.isMouseDown) {\r\n            var scene = this.owner.scene;\r\n            Laya.KeyBoardManager.hasKeyDown(87) && this.moveForward(-0.01 * elapsedTime);//W\r\n            Laya.KeyBoardManager.hasKeyDown(83) && this.moveForward(0.01 * elapsedTime);//S\r\n            Laya.KeyBoardManager.hasKeyDown(65) && this.moveRight(-0.01 * elapsedTime);//A\r\n            Laya.KeyBoardManager.hasKeyDown(68) && this.moveRight(0.01 * elapsedTime);//D\r\n            Laya.KeyBoardManager.hasKeyDown(81) && this.moveVertical(0.01 * elapsedTime);//Q\r\n            Laya.KeyBoardManager.hasKeyDown(69) && this.moveVertical(-0.01 * elapsedTime);//E\r\n\r\n            var offsetX = Laya.stage.mouseX - this.lastMouseX;\r\n            var offsetY = Laya.stage.mouseY - this.lastMouseY;\r\n\r\n            var yprElem = this.yawPitchRoll;\r\n            yprElem.x -= offsetX * this.rotaionSpeed * elapsedTime;\r\n            yprElem.y -= offsetY * this.rotaionSpeed * elapsedTime;\r\n            this.updateRotation();\r\n        }\r\n        this.lastMouseX = Laya.stage.mouseX;\r\n        this.lastMouseY = Laya.stage.mouseY;\r\n    }\r\n    MouseDown(e) {\r\n        //获得鼠标的旋转值\r\n        this.camera.transform.localRotation.getYawPitchRoll(this.yawPitchRoll);\r\n        //获得鼠标的xy值\r\n        this.lastMouseX = Laya.stage.mouseX;\r\n        this.lastMouseY = Laya.stage.mouseY;\r\n        //设置bool值\r\n        this.isMouseDown = true;\r\n        console.log(\"dowm\");\r\n\r\n    }\r\n    mouseUp(e) {\r\n        //设置bool值\r\n        this.isMouseDown = false;\r\n        console.log(\"up\");\r\n    }\r\n    /**\r\n     * 向前移动。\r\n     */\r\n    moveForward(distance) {\r\n        this._tempVector3.x = 0;\r\n        this._tempVector3.y = 0;\r\n        this._tempVector3.z = distance;\r\n        this.camera.transform.translate(this._tempVector3);\r\n    }\r\n    /**\r\n     * 向右移动。\r\n     */\r\n    moveRight(distance) {\r\n        this._tempVector3.y = 0;\r\n        this._tempVector3.z = 0;\r\n        this._tempVector3.x = distance;\r\n        this.camera.transform.translate(this._tempVector3);\r\n    }\r\n    /**\r\n     * 向上移动。\r\n     */\r\n    moveVertical(distance) {\r\n        this._tempVector3.x = this._tempVector3.z = 0;\r\n        this._tempVector3.y = distance;\r\n        this.camera.transform.translate(this._tempVector3, false);\r\n    }\r\n\r\n    updateRotation() {\r\n        if (Math.abs(this.yawPitchRoll.y) < 1.50) {\r\n            Laya.Quaternion.createFromYawPitchRoll(this.yawPitchRoll.x, this.yawPitchRoll.y, this.yawPitchRoll.z, this.tempRotationZ);\r\n            this.tempRotationZ.cloneTo(this.camera.transform.localRotation);\r\n            this.camera.transform.localRotation = this.camera.transform.localRotation;\r\n        }\r\n    }\r\n}","export class J3_BlinnPhone extends Laya.Material {\r\n\r\n    constructor() \r\n    { \r\n        super(); \r\n        //设置本材质使用的shader名字\r\n        this.setShaderName(\"J3_BlinnPhoneShader\");\r\n    }\r\n\r\n    //初始化我们的自定义shader\r\n    static initShader() {\r\n\r\n        //所有的attributeMap属性\r\n        var attributeMap = \r\n        {\r\n            'a_Position': Laya.VertexMesh.MESH_POSITION0, \r\n            'a_Normal': Laya.VertexMesh.MESH_NORMAL0,\r\n        };\r\n\r\n        //所有的uniform属性\r\n        var uniformMap = \r\n        {\r\n            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_CameraPos': Laya.Shader3D.PERIOD_CAMERA,     //相机位置\r\n            'u_LightBuffer': Laya.Shader3D.PERIOD_SCENE,\r\n\r\n            'u_AmbientColor': Laya.Shader3D.PERIOD_SCENE,   //环境光\r\n        };\r\n\r\n        let VS = `\r\n\r\n            attribute vec4 a_Position;\r\n            attribute vec3 a_Normal;\r\n\r\n            uniform mat4 u_MvpMatrix;\r\n            uniform mat4 u_WorldMat;\r\n            uniform vec3 u_CameraPos;\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n\r\n            void main()\r\n            {\r\n                mat3 worldMat = mat3(u_WorldMat);\r\n                v_Normal = worldMat * a_Normal;\r\n\r\n                vec3 WorldPosition = (worldMat * a_Position.xyz).xyz;   //物体空间转到世界空间\r\n                v_ViewDir = u_CameraPos - WorldPosition;    //相机视角\r\n\r\n                gl_Position = u_MvpMatrix * a_Position;\r\n\r\n            } `;\r\n\r\n        let FS = `\r\n\r\n            #ifdef FSHIGHPRECISION\r\n                precision highp float;\r\n            #else\r\n                precision mediump float;\r\n            #endif\r\n            \r\n            #include \"Lighting.glsl\";\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n\r\n            uniform vec3 u_AmbientColor;   //环境光\r\n\r\n            uniform sampler2D u_LightBuffer;\r\n\r\n            void main()\r\n            {   \r\n                DirectionLight directionLight = getDirectionLight(u_LightBuffer,0);\r\n                vec3 lightVec = normalize(directionLight.direction);\r\n                vec3 lightColor = directionLight.color;\r\n\r\n                vec3 ViewDir = normalize(v_ViewDir);\r\n                vec3 normal = normalize(v_Normal);\r\n\r\n                vec3 specColor = vec3(1.0, 1.0, 1.0);\r\n                float specularIntensity = 0.1;\r\n                float gloss = 1.0;\r\n\r\n                //BlinnPhone计算公式\r\n                vec3 h = normalize(ViewDir - lightVec);\r\n                float nh = max (0.0, dot (h,normal));\r\n                vec3 specular = specColor * lightColor * pow (nh, specularIntensity*128.0) * gloss;\r\n\r\n                gl_FragColor = vec4(u_AmbientColor + specular, 1.0);\r\n\r\n            }`;\r\n\r\n        //注册CustomShader \r\n        var LightSh = Laya.Shader3D.add(\"J3_BlinnPhoneShader\");\r\n\r\n        //创建一个SubShader\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n\r\n        //我们的自定义shader customShader中添加我们新创建的subShader\r\n        LightSh.addSubShader(subShader);\r\n\r\n        //往新创建的subShader中添加shaderPass\r\n        subShader.addShaderPass(VS, FS);\r\n    }\r\n}\r\n\r\n","export class J3_DiffBlinnPhone extends Laya.Material {\r\n\r\n    //初始化我们的自定义shader\r\n    static initShader() {\r\n\r\n        //所有的attributeMap属性\r\n        var attributeMap = \r\n        {\r\n            'a_Position': Laya.VertexMesh.MESH_POSITION0, \r\n            'a_Normal': Laya.VertexMesh.MESH_NORMAL0,\r\n        };\r\n\r\n        //所有的uniform属性\r\n        var uniformMap = \r\n        {\r\n            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_CameraPos': Laya.Shader3D.PERIOD_CAMERA,     //相机位置\r\n            'u_LightBuffer': Laya.Shader3D.PERIOD_SCENE,\r\n\r\n            'u_AmbientColor': Laya.Shader3D.PERIOD_SCENE,   //环境光\r\n        };\r\n\r\n        let VS = `\r\n\r\n            attribute vec4 a_Position;\r\n            attribute vec3 a_Normal;\r\n\r\n            uniform mat4 u_MvpMatrix;\r\n            uniform mat4 u_WorldMat;\r\n            uniform vec3 u_CameraPos;\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n\r\n            void main()\r\n            {\r\n                mat3 worldMat = mat3(u_WorldMat);\r\n                v_Normal = worldMat * a_Normal;\r\n\r\n                vec3 WorldPosition = (worldMat * a_Position.xyz).xyz;   //物体空间转到世界空间\r\n                v_ViewDir = u_CameraPos - WorldPosition;    //相机视角\r\n\r\n                gl_Position = u_MvpMatrix * a_Position;\r\n\r\n            } `;\r\n\r\n        let FS = `\r\n\r\n            #ifdef FSHIGHPRECISION\r\n                precision highp float;\r\n            #else\r\n                precision mediump float;\r\n            #endif\r\n            \r\n            #include \"Lighting.glsl\";\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n\r\n            uniform vec3 u_AmbientColor;   //环境光\r\n\r\n            uniform sampler2D u_LightBuffer;\r\n\r\n            void main()\r\n            {   \r\n\r\n                DirectionLight directionLight = getDirectionLight(u_LightBuffer,0);\r\n                vec3 lightVec = normalize(directionLight.direction);\r\n                vec3 lightColor = directionLight.color;\r\n\r\n                vec3 ViewDir = normalize(v_ViewDir);\r\n                vec3 normal = normalize(v_Normal);\r\n\r\n                float ln = max (0.0, dot (-lightVec,v_Normal));  \r\n                ln = ln*0.5 + 0.5; \r\n                vec3 diffuseColor = vec3(1.0, 1.0, 1.0);\r\n                vec3 diffuse = diffuseColor * lightColor * ln;\r\n\r\n                vec3 specColor = vec3(1.0, 1.0, 1.0);\r\n                float specularIntensity = 0.1;\r\n                float gloss = 0.2;\r\n\r\n                //BlinnPhone计算公式\r\n                vec3 h = normalize(ViewDir - lightVec);\r\n                float nh = max (0.0, dot (h,normal));\r\n                vec3 specular = specColor * lightColor * pow (nh, specularIntensity*128.0) * gloss;\r\n\r\n                gl_FragColor = vec4(u_AmbientColor + specular + diffuse, 1.0);\r\n\r\n            }`;\r\n\r\n        //注册CustomShader \r\n        var LightSh = Laya.Shader3D.add(\"J3_DiffBlinnPhoneShader\");\r\n\r\n        //创建一个SubShader\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n\r\n        //我们的自定义shader customShader中添加我们新创建的subShader\r\n        LightSh.addSubShader(subShader);\r\n\r\n        //往新创建的subShader中添加shaderPass\r\n        subShader.addShaderPass(VS, FS);\r\n    }\r\n\r\n    constructor() \r\n    { \r\n    \r\n        super(); \r\n\r\n        //设置本材质使用的shader名字\r\n        this.setShaderName(\"J3_DiffBlinnPhoneShader\");\r\n    }\r\n}\r\n\r\n","import { EventManager, EventType } from \"./EventManager\";\r\nimport { GlobalConfig } from \"./GlobalConfig\";\r\n\r\n/**\r\n * 场景(单例)\r\n */\r\nexport default abstract class SingletonScene {\r\n    /**\r\n     * 每个页面单独的返回主页按钮\r\n     */\r\n    backbtn: Laya.Button;\r\n\r\n    constructor() {\r\n        /**\r\n         * 注册设置场景按钮\r\n         */\r\n        EventManager.RegistEvent(EventType.SETSCENE3D, Laya.Handler.create(this, this.SetScene3d));\r\n    }\r\n\r\n    // 是否展示\r\n    public isShow: boolean = false;\r\n    // 当前场景\r\n    public CurrentScene: Laya.Scene3D;\r\n    /**\r\n     *\r\n     * @param this 单例\r\n     * @returns\r\n     */\r\n    static getInstance<T extends {}>(this: new () => T): T {\r\n        if (!(<any>this).instance) {\r\n            (<any>this).instance = new this();\r\n        }\r\n        return (<any>this).instance;\r\n    }\r\n\r\n    /**\r\n     * 增加按钮\r\n     * @param x \r\n     * @param y \r\n     * @param width \r\n     * @param height \r\n     * @param text \r\n     * @param clickFun \r\n     */\r\n    private addButton(x: number, y: number, width: number, height: number, text: string, clickFun: Function): void {\r\n        Laya.loader.load([GlobalConfig.ResPath + \"res/threeDimen/ui/button.png\"], Laya.Handler.create(this, function () {\r\n            this.backbtn = new Laya.Button(GlobalConfig.ResPath + \"res/threeDimen/ui/button.png\", text);\r\n            Laya.stage.addChild(this.backbtn);\r\n            this.backbtn.size(width, height);\r\n            this.backbtn.pos(x, y);\r\n            this.backbtn.on(Laya.Event.CLICK, this, clickFun);\r\n        }));\r\n    }\r\n\r\n    /**\r\n     * 设置当前场景\r\n     * @param scene 场景\r\n     */\r\n    public SetScene3d(scene: Laya.Scene3D) {\r\n        if (!this.CurrentScene) {\r\n            this.CurrentScene = scene;\r\n            Laya.stage.addChild(this.CurrentScene);\r\n            this.Show();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取当前场景\r\n     * @returns 场景\r\n     */\r\n    public GetScene3d(): Laya.Scene3D {\r\n        return this.CurrentScene;\r\n    }\r\n\r\n    /**\r\n     * 自动设置current场景\r\n     * @param scene 场景\r\n     */\r\n    public AutoSetScene3d(scene: Laya.Scene3D) {\r\n        EventManager.DispatchEvent(EventType.BACKTOMAIN);\r\n        EventManager.DispatchEvent(EventType.SETSCENE3D, scene);\r\n    }\r\n\r\n    /**\r\n     * 增加返回主页按钮\r\n     */\r\n    AddReturn() {\r\n        this.addButton(50, 50, 100, 40, \"返回主页\", function (e) {\r\n            this.Hide();\r\n            if (this.backbtn) {\r\n                this.backbtn.visible = false;\r\n                this.backbtn.destroy();\r\n                this.backbtn = null;\r\n            }\r\n            EventManager.DispatchEvent(EventType.BACKTOMAIN);\r\n            this.isShow = false;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    Show(): void {\r\n        if (this.CurrentScene) {\r\n            this.CurrentScene.visible = true;\r\n            this.AddReturn();\r\n        }\r\n        //显示性能面板\r\n        Laya.Stat.show();\r\n    }\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    Hide(): void {\r\n        if (this.CurrentScene) {\r\n            this.CurrentScene.visible = false;\r\n        }\r\n        //隐藏性能面板\r\n        Laya.Stat.hide();\r\n    }\r\n\r\n    /**\r\n     * 点击\r\n     */\r\n    Click(): void {\r\n        this.isShow = !this.isShow;\r\n        if (this.isShow) {\r\n            this.Show();\r\n        }\r\n        else {\r\n            this.Hide();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 销毁\r\n     */\r\n    Destroy(): void {\r\n        if (this.CurrentScene) {\r\n            this.CurrentScene.destroy();\r\n        }\r\n    }\r\n}\r\n","import { CameraMoveScript } from \"../Common/CameraMoveScript\";\r\nimport { J3_BlinnPhone } from \"../Lib/J3_BlinnPhone\";\r\nimport { J3_DiffBlinnPhone } from \"../Lib/J3_DiffBlinnPhone\";\r\nimport SingletonScene from \"../SingletonScene\";\r\n\r\nexport class J3_BlinnPhone_Scene extends SingletonScene{\r\n    constructor(){\r\n        super();\r\n\r\n        this.init();\r\n    }\r\n\r\n    init(){\r\n         //初始化Shader\r\n         J3_BlinnPhone.initShader();\r\n         J3_DiffBlinnPhone.initShader();\r\n         //添加3D场景\r\n         var scene = new Laya.Scene3D();\r\n         scene.ambientColor = new Laya.Vector3(0.2, 0.1, 0.2);\r\n \r\n         //添加照相机\r\n         var camera = new Laya.Camera(0, 0.1, 100);\r\n         scene.addChild(camera);\r\n         camera.transform.translate(new Laya.Vector3(0, 2, 4));\r\n         camera.transform.rotate(new Laya.Vector3(-30, 0, 0), true, false);\r\n         camera.addComponent(CameraMoveScript);\r\n \r\n         var directionLight = new Laya.DirectionLight();\r\n         scene.addChild(directionLight);\r\n         directionLight.color = new Laya.Vector3(1.0, 1.0, 1.0);\r\n         //设置灯光方向\r\n         directionLight.transform.worldMatrix.setForward(new Laya.Vector3(-1, -1, 0));\r\n \r\n         //添加自定义模型\r\n         var Capsule = new Laya.MeshSprite3D(Laya.PrimitiveMesh.createCapsule(0.5, 2, 15, 25));\r\n         scene.addChild(Capsule);\r\n         Capsule.transform.position = new Laya.Vector3(0, 0.0, 1);\r\n         //Capsule.transform.scale = new Laya.Vector3(0.4, 0.4, 0.4);\r\n \r\n         //var J3_BlinnPhoneMat = new J3_BlinnPhone();\r\n         var J3_DiffBlinnPhoneMat = new J3_DiffBlinnPhone();\r\n \r\n         //Capsule.meshRenderer.material = J3_BlinnPhoneMat;\r\n         Capsule.meshRenderer.material = J3_DiffBlinnPhoneMat;\r\n \r\n         this.AutoSetScene3d(scene);\r\n \r\n         Laya.timer.frameLoop(1, this, function () { Capsule.transform.rotate(new Laya.Vector3(0, 0.005, 0), false); });\r\n    }\r\n}","export class J4_DiffuseTexture extends Laya.Material {\r\n    static TilingOffset: any;\r\n    static SHADERDEFINE_LEGACYSINGALLIGHTING: any;\r\n    static SHADERDEFINE_MAINTEXTURE: any;\r\n    static SHADERDEFINE_TILINGOFFSET: any;\r\n    static SHADERDEFINE_ADDTIVEFOG: any;\r\n    private static DiffuseTexture :any;\r\n\r\n    constructor() {\r\n        super();\r\n        //设置本材质使用的shader名字\r\n        this.setShaderName(\"J4_DiffuseTextureShader\");\r\n        this.TilingOffset = new Laya.Vector4(1.0, 1.0, 0.0, 0.0);\r\n    }\r\n    static __init__() {\r\n        //使用 Shader3D 中的 propertyNameToID 方法关联 材质的 _shaderValues 与 shader uniform\r\n        J4_DiffuseTexture.DiffuseTexture = Laya.Shader3D.propertyNameToID(\"u_DiffuseTexture\");\r\n        J4_DiffuseTexture.TilingOffset = Laya.Shader3D.propertyNameToID(\"u_TilingOffset\");\r\n    }\r\n    static __initDefine__() {\r\n        //注册宏定义\r\n        J4_DiffuseTexture.SHADERDEFINE_LEGACYSINGALLIGHTING = Laya.Shader3D.getDefineByName(\"LEGACYSINGLELIGHTING\");\r\n        J4_DiffuseTexture.SHADERDEFINE_MAINTEXTURE = Laya.Shader3D.getDefineByName(\"MAINTEXTURE\");\r\n        J4_DiffuseTexture.SHADERDEFINE_TILINGOFFSET = Laya.Shader3D.getDefineByName(\"TILINGOFFSET\");\r\n        J4_DiffuseTexture.SHADERDEFINE_ADDTIVEFOG = Laya.Shader3D.getDefineByName(\"ADDTIVEFOG\");\r\n    }\r\n\r\n    //封装 _shaderValues 实现修改材质属性\r\n    get DiffuseTexture():any {\r\n        return this._shaderValues.getTexture(J4_DiffuseTexture.DiffuseTexture);\r\n    }\r\n\r\n    set DiffuseTexture(value:any){\r\n        this._shaderValues.setTexture(J4_DiffuseTexture.DiffuseTexture, value);\r\n    }\r\n\r\n    get TilingOffset() { return this._shaderValues.getVector(J4_DiffuseTexture.TilingOffset); }\r\n    set TilingOffset(value) { this._shaderValues.setVector(J4_DiffuseTexture.TilingOffset, value); }\r\n\r\n    //初始化我们的自定义shader\r\n    static initShader() {\r\n\r\n        J4_DiffuseTexture.__init__();\r\n        J4_DiffuseTexture.__initDefine__();\r\n\r\n        //所有的attributeMap属性\r\n        var attributeMap =\r\n        {\r\n            'a_Position': Laya.VertexMesh.MESH_POSITION0,\r\n            'a_Normal': Laya.VertexMesh.MESH_NORMAL0,\r\n            'a_Texcoord0': Laya.VertexMesh.MESH_TEXTURECOORDINATE0,\r\n        };\r\n\r\n        //所有的uniform属性\r\n        var uniformMap =\r\n        {\r\n            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_CameraPos': Laya.Shader3D.PERIOD_CAMERA,     //相机位置\r\n            'u_LightBuffer': Laya.Shader3D.PERIOD_SCENE,\r\n            'u_AmbientColor': Laya.Shader3D.PERIOD_SCENE,      //环境光\r\n            'u_DiffuseTexture': Laya.Shader3D.PERIOD_MATERIAL, //漫反射贴图\r\n            'u_TilingOffset': Laya.Shader3D.PERIOD_MATERIAL,   //UV坐标属性\r\n        };\r\n\r\n        let VS = `\r\n            #include \"Lighting.glsl\";\r\n\r\n            attribute vec4 a_Position;\r\n            attribute vec3 a_Normal;\r\n            attribute vec2 a_Texcoord0;\r\n\r\n            uniform mat4 u_MvpMatrix;\r\n            uniform mat4 u_WorldMat;\r\n            uniform vec3 u_CameraPos;\r\n            uniform vec4 u_TilingOffset;\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n            varying vec2 v_Texcoord0;\r\n\r\n            void main()\r\n            {\r\n                v_Texcoord0=TransformUV(a_Texcoord0,u_TilingOffset);\r\n\r\n                mat3 worldMat = mat3(u_WorldMat);\r\n                v_Normal = worldMat * a_Normal;\r\n\r\n                vec3 WorldPosition = (worldMat * a_Position.xyz).xyz;   //物体空间转到世界空间\r\n                v_ViewDir = u_CameraPos - WorldPosition;    //相机视角\r\n\r\n                gl_Position = u_MvpMatrix * a_Position;\r\n\r\n            } `;\r\n\r\n        let FS = `\r\n\r\n            #ifdef FSHIGHPRECISION\r\n                precision highp float;\r\n            #else\r\n                precision mediump float;\r\n            #endif\r\n            \r\n            #include \"Lighting.glsl\";\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n            varying vec2 v_Texcoord0;\r\n\r\n            uniform vec3 u_AmbientColor;   //环境光\r\n            uniform sampler2D u_DiffuseTexture;\r\n            uniform sampler2D u_LightBuffer;\r\n\r\n            void main()\r\n            {   \r\n\r\n                DirectionLight directionLight = getDirectionLight(u_LightBuffer,0);\r\n                vec3 lightVec = normalize(directionLight.direction);\r\n                vec3 lightColor = directionLight.color;\r\n\r\n                vec3 ViewDir = normalize(v_ViewDir);\r\n                vec3 Normal = normalize(v_Normal);\r\n\r\n                float ln = max (0.0, dot (-lightVec,Normal));  \r\n                ln = ln*0.5 + 0.5; \r\n                vec3 diffuseColor = vec3(1.0, 1.0, 1.0);\r\n\r\n                vec4 difTex = texture2D(u_DiffuseTexture, v_Texcoord0);\r\n                vec3 diffuse = difTex.rgb * diffuseColor * lightColor * ln;\r\n        \r\n                vec3 specColor = vec3(1.0, 1.0, 1.0);\r\n                float specularIntensity = 1.0;\r\n                float gloss = 1.0;\r\n\r\n                //BlinnPhone计算公式\r\n                vec3 h = normalize(ViewDir - lightVec);\r\n                float nh = max (0.0, dot (h,Normal));\r\n                vec3 specular = specColor * lightColor * pow (nh, specularIntensity*128.0) * gloss;\r\n\r\n                gl_FragColor = vec4(u_AmbientColor + specular + diffuse, 1.0);\r\n\r\n            }`;\r\n\r\n        //注册CustomShader \r\n        var LightSh = Laya.Shader3D.add(\"J4_DiffuseTextureShader\");\r\n\r\n        //创建一个SubShader\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n\r\n        //我们的自定义shader customShader中添加我们新创建的subShader\r\n        LightSh.addSubShader(subShader);\r\n\r\n        //往新创建的subShader中添加shaderPass\r\n        subShader.addShaderPass(VS, FS);\r\n    }\r\n\r\n}","import { J4_DiffuseTexture } from \"../Lib/J4_DiffuseTexture\";\r\nimport SingletonScene from \"../SingletonScene\";\r\nimport { CameraMoveScript } from \"../Common/CameraMoveScript\";\r\n\r\nexport class J4_DiffuseTexture_Scene extends SingletonScene {\r\n    private s_scene: Laya.Scene3D;\r\n    constructor() {\r\n        super();\r\n\r\n        this.init();\r\n    }\r\n    init() {\r\n\r\n        //初始化Shader\r\n        J4_DiffuseTexture.initShader();\r\n\r\n        //添加3D场景\r\n        this.s_scene = new Laya.Scene3D();\r\n        this.s_scene.ambientColor = new Laya.Vector3(0.1, 0.1, 0.1);\r\n\r\n        //添加照相机\r\n        var camera = new Laya.Camera(0, 0.1, 100);\r\n        camera.transform.translate(new Laya.Vector3(0, 2, 4));\r\n        camera.transform.rotate(new Laya.Vector3(-30, 0, 0), true, false);\r\n        camera.addComponent(CameraMoveScript);\r\n        this.s_scene.addChild(camera);\r\n\r\n        var directionLight = new Laya.DirectionLight();\r\n        directionLight.color = new Laya.Vector3(1.0, 1.0, 1.0);\r\n        //设置灯光方向\r\n        directionLight.transform.worldMatrix.setForward(new Laya.Vector3(-1, -1, -2));\r\n        this.s_scene.addChild(directionLight);\r\n\r\n        //添加自定义模型\r\n        var Capsule = new Laya.MeshSprite3D(Laya.PrimitiveMesh.createCapsule(0.5, 2, 15, 25));\r\n        Capsule.transform.position = new Laya.Vector3(0, 0.0, 1);\r\n        this.s_scene.addChild(Capsule);\r\n\r\n        var material = new J4_DiffuseTexture();\r\n\r\n        Capsule.meshRenderer.material = material;\r\n        Laya.Texture2D.load(\"res/textures/Wall02_Diffuse.png\", Laya.Handler.create(this, function (tex) {\r\n            material.DiffuseTexture = tex;\r\n            console.log(tex);\r\n            this.AutoSetScene3d(this.s_scene);\r\n        }));\r\n\r\n        material.TilingOffset = new Laya.Vector4(1.0, 1.0, 0.0, 0.0);\r\n    }\r\n}","export class J3_DiffusePixe extends Laya.Material {\r\n\r\n    constructor() \r\n    { \r\n        super(); \r\n        this.setShaderName(\"J3_DiffusePixeShader\");\r\n    }\r\n\r\n    /*static __init__(){\r\n        Laya.Scene3D.LIGHTDIRECTION = Laya.Shader3D.propertyNameToID(\"u_DirectionLight.direction\");\r\n        Laya.Scene3D.LIGHTDIRCOLOR = Laya.Shader3D.propertyNameToID(\"u_DirectionLight.color\");\r\n    }*/\r\n\r\n    //初始化我们的自定义shader\r\n    static initShader() {\r\n\r\n        //J3_DiffusePixe.__init__();\r\n\r\n        //所有的attributeMap属性\r\n        var attributeMap = \r\n        {\r\n            'a_Position': Laya.VertexMesh.MESH_POSITION0, \r\n            'a_Normal': Laya.VertexMesh.MESH_NORMAL0,            //顶点法线属性\r\n        };\r\n        //所有的uniform属性\r\n        var uniformMap = \r\n        {\r\n            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE,          //世界矩阵  \r\n            'u_LightBuffer': Laya.Shader3D.PERIOD_SCENE,\r\n\r\n        };\r\n\r\n        let VS = `\r\n\r\n            attribute vec4 a_Position;\r\n            attribute vec3 a_Normal;\r\n\r\n            uniform mat4 u_MvpMatrix;\r\n            uniform mat4 u_WorldMat;\r\n\r\n            varying vec3 v_Normal;\r\n\r\n            void main()\r\n            {\r\n                mat3 worldMat = mat3(u_WorldMat);\r\n                v_Normal = normalize(worldMat*a_Normal);\r\n\r\n                gl_Position = u_MvpMatrix * a_Position;\r\n            } `;\r\n\r\n        let FS = `\r\n            #ifdef FSHIGHPRECISION\r\n                precision highp float;\r\n            #else\r\n                precision mediump float;\r\n            #endif\r\n\r\n            //加载lighting库\r\n            #include \"Lighting.glsl\";\r\n\r\n            varying vec3 v_Normal;\r\n\r\n            uniform sampler2D u_LightBuffer;\r\n\r\n            void main()\r\n            {   \r\n\r\n                DirectionLight directionLight = getDirectionLight(u_LightBuffer,0);\r\n                vec3 lightVec = normalize(directionLight.direction);\r\n                vec3 lightColor = directionLight.color;\r\n\r\n                float ln = max (0.0, dot (-lightVec,v_Normal));  //兰伯特\r\n                ln = ln*0.5 + 0.5; //半兰伯特\r\n\r\n                vec3 diffuseColor = vec3(0.5, 0.5, 0.5);\r\n\r\n                vec3 Color = diffuseColor * lightColor * ln;\r\n\r\n                gl_FragColor = vec4(Color,1.0);\r\n\r\n            }`;\r\n\r\n        var customShader = Laya.Shader3D.add(\"J3_DiffusePixeShader\");\r\n\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n\r\n        customShader.addSubShader(subShader);\r\n\r\n        subShader.addShaderPass(VS, FS);\r\n    }\r\n}\r\n","export class J3_DiffuseVertex extends Laya.Material {\r\n    \r\n    constructor() \r\n    { \r\n        super(); \r\n        this.setShaderName(\"J3_DiffuseVertexShader\");\r\n    }\r\n\r\n    //初始化我们的自定义shader\r\n    static initShader() {\r\n\r\n        //所有的attributeMap属性\r\n        var attributeMap = \r\n        {\r\n            'a_Position': Laya.VertexMesh.MESH_POSITION0, \r\n            'a_Normal': Laya.VertexMesh.MESH_NORMAL0             //顶点法线属性\r\n        };\r\n        //所有的uniform属性\r\n        var uniformMap = \r\n        {\r\n            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE,          //世界矩阵  \r\n            'u_LightBuffer': Laya.Shader3D.PERIOD_SCENE,\r\n\r\n        };\r\n\r\n        let VS = `\r\n            #include \"Lighting.glsl\";\r\n\r\n            attribute vec4 a_Position;\r\n            attribute vec3 a_Normal;\r\n\r\n            uniform mat4 u_MvpMatrix;\r\n            uniform mat4 u_WorldMat;\r\n\r\n            //声明传递给片元着色器的变量\r\n            varying vec3 v_VertexColor;\r\n\r\n            uniform sampler2D u_LightBuffer;\r\n\r\n            void main()\r\n            {   \r\n\r\n                DirectionLight directionLight = getDirectionLight(u_LightBuffer,0);\r\n                vec3 lightVec = normalize(directionLight.direction);\r\n                vec3 lightColor = directionLight.color;\r\n\r\n                mat3 worldMat = mat3(u_WorldMat);       //转成三维矩阵\r\n\r\n                vec3 normal = normalize(worldMat*a_Normal);  //物体空间法线转化成世界空间，且归一化\r\n\r\n\r\n                //漫反射计算公式\r\n                float ln = max (0.0, dot (-lightVec,normal));\r\n\r\n                v_VertexColor = lightColor * ln;\r\n\r\n                gl_Position = u_MvpMatrix * a_Position;\r\n\r\n            } `;\r\n\r\n        let FS = `\r\n            #ifdef FSHIGHPRECISION\r\n                precision highp float;\r\n            #else\r\n                precision mediump float;\r\n            #endif\r\n\r\n            //接收顶点着色器的变量\r\n            varying vec3 v_VertexColor;\r\n\r\n            void main()\r\n            {                    \r\n                gl_FragColor = vec4(v_VertexColor,1.0);\r\n            }`;\r\n\r\n        var customShader = Laya.Shader3D.add(\"J3_DiffuseVertexShader\");\r\n\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n\r\n        customShader.addSubShader(subShader);\r\n\r\n        subShader.addShaderPass(VS, FS);\r\n    }\r\n}\r\n","import { J3_DiffusePixe } from \"../Lib/J3_DiffusePixe\";\r\nimport { J3_DiffuseVertex } from \"../Lib/J3_DiffuseVertex\";\r\nimport SingletonScene from \"../SingletonScene\";\r\n\r\nexport class J3_DiffusePixe_Scene extends SingletonScene {\r\n    constructor() {\r\n        super();\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n\r\n        //初始化Shader\r\n        J3_DiffusePixe.initShader();\r\n        J3_DiffuseVertex.initShader();\r\n\r\n        //添加3D场景\r\n        var scene = new Laya.Scene3D();\r\n        scene.ambientColor = new Laya.Vector3(0.2, 0.1, 0.2);\r\n\r\n        //添加照相机\r\n        var camera = new Laya.Camera(0, 0.1, 100);\r\n        camera.transform.translate(new Laya.Vector3(0, 2, 4));\r\n        camera.transform.rotate(new Laya.Vector3(-30, 0, 0), true, false);\r\n\r\n        var directionLight = new Laya.DirectionLight();\r\n        directionLight.color = new Laya.Vector3(1.0, 1.0, 1.0);\r\n        //设置灯光方向\r\n        directionLight.transform.worldMatrix.setForward(new Laya.Vector3(-1, -1, -2));\r\n\r\n        //添加自定义模型\r\n        var Capsule = new Laya.MeshSprite3D(Laya.PrimitiveMesh.createCapsule(0.5, 2, 15, 25));\r\n        Capsule.transform.position = new Laya.Vector3(0, 0.0, 1);\r\n        //Capsule.transform.scale = new Laya.Vector3(0.4, 0.4, 0.4);\r\n\r\n        /*var J3_DiffusePixeMat = new J3_DiffusePixe();\r\n        Capsule.meshRenderer.material = J3_DiffusePixeMat;\r\n        */\r\n\r\n        scene.addChild(camera);\r\n        scene.addChild(directionLight);\r\n        scene.addChild(Capsule);\r\n        this.AutoSetScene3d(scene);\r\n\r\n        var J3_DiffuseVertexMat = new J3_DiffuseVertex();\r\n        Capsule.meshRenderer.material = J3_DiffuseVertexMat;\r\n\r\n    }\r\n}","export class J4_NormalTexture extends Laya.Material {\r\n    static DiffuseTexture: any;\r\n    static NORMALTEXTURE: any;\r\n    static TilingOffset: any;\r\n    constructor() {\r\n        super();\r\n        //设置本材质使用的shader名字\r\n        this.setShaderName(\"J4_NormalTextureShader\");\r\n        this.TilingOffset = new Laya.Vector4(3.0, 3.0, 0.0, 0.0);\r\n    }\r\n\r\n    static __init__() {\r\n        J4_NormalTexture.DiffuseTexture = Laya.Shader3D.propertyNameToID(\"u_DiffuseTexture\");\r\n        J4_NormalTexture.NORMALTEXTURE = Laya.Shader3D.propertyNameToID(\"u_NormalMap\");\r\n        J4_NormalTexture.TilingOffset = Laya.Shader3D.propertyNameToID(\"u_TilingOffset\");\r\n    }\r\n\r\n    get DiffuseTexture() { return this._shaderValues.getTexture(J4_NormalTexture.DiffuseTexture); }\r\n    set DiffuseTexture(value) { this._shaderValues.setTexture(J4_NormalTexture.DiffuseTexture, value); }\r\n\r\n    get normalTexture() { return this._shaderValues.getTexture(J4_NormalTexture.NORMALTEXTURE); }\r\n    set normalTexture(value) { this._shaderValues.setTexture(J4_NormalTexture.NORMALTEXTURE, value); }\r\n\r\n    get TilingOffset() { return this._shaderValues.getVector(J4_NormalTexture.TilingOffset); }\r\n    set TilingOffset(value) { this._shaderValues.setVector(J4_NormalTexture.TilingOffset, value); }\r\n\r\n    //初始化我们的自定义shader\r\n    static initShader() {\r\n\r\n        J4_NormalTexture.__init__();\r\n\r\n        //所有的attributeMap属性\r\n        var attributeMap =\r\n        {\r\n            'a_Position': Laya.VertexMesh.MESH_POSITION0,\r\n            'a_Normal': Laya.VertexMesh.MESH_NORMAL0,\r\n            'a_Texcoord0': Laya.VertexMesh.MESH_TEXTURECOORDINATE0,\r\n            'a_Tangent0': Laya.VertexMesh.MESH_TANGENT0,\r\n        };\r\n\r\n        //所有的uniform属性\r\n        var uniformMap =\r\n        {\r\n            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_CameraPos': Laya.Shader3D.PERIOD_CAMERA,     //相机位置\r\n            'u_LightBuffer': Laya.Shader3D.PERIOD_SCENE,\r\n            'u_AmbientColor': Laya.Shader3D.PERIOD_SCENE,      //环境光\r\n            'u_DiffuseTexture': Laya.Shader3D.PERIOD_MATERIAL, //漫反射贴图\r\n            'u_NormalMap': Laya.Shader3D.PERIOD_MATERIAL,  //法线贴图\r\n            'u_TilingOffset': Laya.Shader3D.PERIOD_MATERIAL,   //UV坐标属性\r\n\r\n        };\r\n\r\n        let VS = `\r\n            #include \"Lighting.glsl\";\r\n\r\n            attribute vec4 a_Position;\r\n            attribute vec3 a_Normal;\r\n            attribute vec2 a_Texcoord0;\r\n            attribute vec4 a_Tangent0;\r\n\r\n            uniform mat4 u_MvpMatrix;\r\n            uniform mat4 u_WorldMat;\r\n            uniform vec3 u_CameraPos;\r\n            uniform vec4 u_TilingOffset;\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n            varying vec2 v_Texcoord0;\r\n            varying vec3 v_Tangent;\r\n            varying vec3 v_Binormal;\r\n\r\n            void main()\r\n            {\r\n                v_Texcoord0=TransformUV(a_Texcoord0,u_TilingOffset);\r\n\r\n                mat3 worldMat = mat3(u_WorldMat);\r\n                v_Normal = worldMat * a_Normal;\r\n\r\n                v_Tangent = a_Tangent0.xyz * worldMat;\r\n                v_Binormal = cross(v_Normal,v_Tangent) * a_Tangent0.w;\r\n\r\n                vec3 WorldPosition = (worldMat * a_Position.xyz).xyz;   //物体空间转到世界空间\r\n                v_ViewDir = u_CameraPos - WorldPosition;    //相机视角\r\n\r\n                gl_Position = u_MvpMatrix * a_Position;\r\n\r\n            } `;\r\n\r\n        let FS = `\r\n\r\n            #ifdef FSHIGHPRECISION\r\n                precision highp float;\r\n            #else\r\n                precision mediump float;\r\n            #endif\r\n            \r\n            #include \"Lighting.glsl\";\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n            varying vec2 v_Texcoord0;\r\n            varying vec3 v_Tangent;\r\n            varying vec3 v_Binormal;\r\n\r\n            uniform vec3 u_AmbientColor;   //环境光\r\n\r\n            uniform sampler2D u_DiffuseTexture;\r\n            uniform sampler2D u_NormalMap;\r\n\r\n            uniform sampler2D u_LightBuffer;\r\n\r\n            void main()\r\n            {   \r\n\r\n                DirectionLight directionLight = getDirectionLight(u_LightBuffer,0);\r\n                vec3 lightVec = normalize(directionLight.direction);\r\n                vec3 lightColor = directionLight.color;\r\n\r\n                vec3 ViewDir = normalize(v_ViewDir);\r\n                vec3 normal = normalize(v_Normal);\r\n\r\n                vec3 normalMap = texture2D(u_NormalMap, v_Texcoord0).rgb;\r\n                normalMap.xy *= 1.0;\r\n\r\n                normalMap = normalize(NormalSampleToWorldSpace(normalMap, normal, v_Tangent,v_Binormal));\r\n                \r\n                float ln = max (0.0, dot (-lightVec,normalMap));  \r\n                ln = ln*0.5 + 0.5; \r\n\r\n                vec3 diffuseColor = vec3(1.0, 1.0, 1.0);\r\n                vec4 difTex = texture2D(u_DiffuseTexture, v_Texcoord0);\r\n                vec3 diffuse = difTex.rgb * diffuseColor * lightColor * ln;\r\n        \r\n                vec3 specColor = vec3(1.0, 1.0, 1.0);\r\n                float specularIntensity = 2.0;\r\n                float gloss = 1.0;\r\n\r\n                //BlinnPhone计算公式\r\n                vec3 h = normalize(ViewDir - lightVec);\r\n                float nh = max (0.0, dot (h, normalMap));\r\n                vec3 specular = specColor * lightColor * pow (nh, specularIntensity*128.0) * gloss;\r\n\r\n                gl_FragColor = vec4(u_AmbientColor + specular + diffuse, 1.0);\r\n                //gl_FragColor = vec4(difTex.rgb, 1.0);\r\n\r\n            }`;\r\n\r\n        //注册CustomShader \r\n        var LightSh = Laya.Shader3D.add(\"J4_NormalTextureShader\");\r\n\r\n        //创建一个SubShader\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n\r\n        //我们的自定义shader customShader中添加我们新创建的subShader\r\n        LightSh.addSubShader(subShader);\r\n\r\n        //往新创建的subShader中添加shaderPass\r\n        subShader.addShaderPass(VS, FS);\r\n    }\r\n}\r\n\r\n","import SingletonScene from \"../SingletonScene\";\r\nimport { J4_NormalTexture } from \"../Lib/J4_NormalTexture\";\r\nexport class J4_NormalTexture_Scene extends SingletonScene{\r\n    constructor(){\r\n        super();\r\n\r\n        this.init();\r\n    }\r\n    init() {\r\n\r\n        //初始化Shader\r\n        J4_NormalTexture.initShader();\r\n\r\n        //添加场景\r\n        Laya.Scene3D.load(\"res/models/lightMap/lightMap.ls\", Laya.Handler.create(this, function(scene) {\r\n            this.AutoSetScene3d(scene);\r\n            scene.ambientColor = new Laya.Vector3(0.0, 0.0, 0.0);\r\n            console.log(scene);\r\n\r\n            var directionLight = scene.addChild(new Laya.DirectionLight());\r\n            directionLight.color = new Laya.Vector3(1.0, 1.0, 1.0);\r\n            directionLight.transform.worldMatrix.setForward(new Laya.Vector3(-2, -2, 0));\r\n\r\n            var material = new J4_NormalTexture();\r\n\r\n            scene.getChildAt(1).getChildAt(0).meshRenderer.material = material; \r\n            scene.getChildAt(1).getChildAt(1).meshRenderer.material = material; \r\n            scene.getChildAt(2).meshRenderer.material = material; \r\n\r\n            Laya.Texture2D.load(\"res/textures/Wall02_Diffuse.png\", Laya.Handler.create(this, function(tex) {\r\n                material.DiffuseTexture = tex;\r\n                console.log(tex);\r\n            }));\r\n            Laya.Texture2D.load(\"res/textures/Wall02_Normal.png\", Laya.Handler.create(this, function(tex) {\r\n                material.normalTexture = tex;\r\n                console.log(tex);\r\n            }));\r\n            \r\n            material.TilingOffset = new Laya.Vector4(2.0, 1.0, 0.0, 0.0);\r\n\r\n            Laya.timer.frameLoop(1, this, function() {scene.getChildAt(1).transform.rotate(new Laya.Vector3(0, 0.005, 0), false);});\r\n\r\n        }));\r\n    }\r\n}","export class J5_AlphaBlending extends Laya.Material {\r\n    static DiffuseTexture:any;\r\n    static TilingOffset:any;\r\n    constructor() \r\n    { \r\n        super(); \r\n        //设置本材质使用的shader名字\r\n        this.setShaderName(\"J5_AlphaBlendingShader\");\r\n        this.TilingOffset = new Laya.Vector4(1.0, 1.0, 0.0, 0.0);\r\n    }\r\n\r\n    static __init__(){\r\n        J5_AlphaBlending.DiffuseTexture = Laya.Shader3D.propertyNameToID(\"u_DiffuseTexture\");\r\n        J5_AlphaBlending.TilingOffset = Laya.Shader3D.propertyNameToID(\"u_TilingOffset\");\r\n    }\r\n\r\n    get DiffuseTexture() {return this._shaderValues.getTexture(J5_AlphaBlending.DiffuseTexture);}\r\n    set DiffuseTexture(value) {this._shaderValues.setTexture(J5_AlphaBlending.DiffuseTexture, value);}\r\n\r\n    get TilingOffset() {return this._shaderValues.getVector(J5_AlphaBlending.TilingOffset);}\r\n    set TilingOffset(value) {this._shaderValues.setVector(J5_AlphaBlending.TilingOffset, value);}\r\n\r\n    //初始化我们的自定义shader\r\n    static initShader() {\r\n\r\n        J5_AlphaBlending.__init__();\r\n\r\n        //所有的attributeMap属性\r\n        var attributeMap = \r\n        {\r\n            'a_Position': Laya.VertexMesh.MESH_POSITION0, \r\n            'a_Normal': Laya.VertexMesh.MESH_NORMAL0,\r\n            'a_Texcoord0': Laya.VertexMesh.MESH_TEXTURECOORDINATE0,\r\n        };\r\n\r\n        //所有的uniform属性\r\n        var uniformMap = \r\n        {\r\n            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_CameraPos': Laya.Shader3D.PERIOD_CAMERA,     //相机位置\r\n            'u_LightBuffer': Laya.Shader3D.PERIOD_SCENE,\r\n\r\n            'u_AmbientColor': Laya.Shader3D.PERIOD_SCENE,      //环境光\r\n            'u_DiffuseTexture': Laya.Shader3D.PERIOD_MATERIAL, //漫反射贴图\r\n            'u_TilingOffset': Laya.Shader3D.PERIOD_MATERIAL,   //UV坐标属性\r\n        };\r\n\r\n        let VS = `\r\n            #include \"Lighting.glsl\";\r\n\r\n            attribute vec4 a_Position;\r\n            attribute vec3 a_Normal;\r\n            attribute vec2 a_Texcoord0;\r\n\r\n            uniform mat4 u_MvpMatrix;\r\n            uniform mat4 u_WorldMat;\r\n            uniform vec4 u_TilingOffset;\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec2 v_Texcoord0;\r\n\r\n            void main()\r\n            {\r\n                \r\n                v_Texcoord0=a_Texcoord0;\r\n                //v_Texcoord0=TransformUV(a_Texcoord0,u_TilingOffset);\r\n                v_Normal = mat3(u_WorldMat) * a_Normal;\r\n                gl_Position = u_MvpMatrix * a_Position;\r\n\r\n            } `;\r\n\r\n        let FS = `\r\n\r\n            #ifdef FSHIGHPRECISION\r\n                precision highp float;\r\n            #else\r\n                precision mediump float;\r\n            #endif\r\n            \r\n            #include \"Lighting.glsl\";\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec2 v_Texcoord0;\r\n\r\n            uniform vec3 u_AmbientColor;   //环境光\r\n\r\n            uniform sampler2D u_DiffuseTexture;\r\n\r\n            uniform sampler2D u_LightBuffer;\r\n\r\n            void main()\r\n            {   \r\n\r\n                DirectionLight directionLight = getDirectionLight(u_LightBuffer,0);\r\n                vec3 lightVec = normalize(directionLight.direction);\r\n                vec3 lightColor = directionLight.color;\r\n\r\n                vec3 normal = normalize(v_Normal);\r\n\r\n                float ln = dot (lightVec,normal);  \r\n                ln = ln*0.5 + 0.5; \r\n\r\n                vec4 diffuse = texture2D(u_DiffuseTexture, v_Texcoord0);\r\n\r\n                if(diffuse.a < 0.4) discard;\r\n\r\n                gl_FragColor = vec4(diffuse);\r\n                //gl_FragColor = vec4(diffuse.rgb, 1.0);\r\n\r\n            }`;\r\n\r\n        //注册CustomShader \r\n        var custom = Laya.Shader3D.add(\"J5_AlphaBlendingShader\");\r\n\r\n        //创建一个SubShader\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n        \r\n        //我们的自定义shader customShader中添加我们新创建的subShader\r\n        custom.addSubShader(subShader);\r\n\r\n        //往新创建的subShader中添加shaderPass\r\n       \r\n        var ShaderPass = subShader.addShaderPass(VS, FS);\r\n\r\n        ShaderPass.renderState.cull = 2;//Laya.RenderState.CULL_BACK;\r\n        ShaderPass.renderState.blend = 1;//Laya.RenderState.BLEND_ENABLE_ALL;\r\n        ShaderPass.renderState.srcBlend = 770;//Laya.RenderState.BLENDPARAM_SRC_ALPHA;\r\n        ShaderPass.renderState.dstBlend = 771;//Laya.RenderState.BLENDPARAM_ONE_MINUS_SRC_ALPHA;\r\n        ShaderPass.renderState.depthWrite = false;\r\n        ShaderPass.renderState.depthTest = 515;//Laya.RenderState.DEPTHTEST_LEQUAL;\r\n        \r\n    }\r\n}\r\n\r\n\r\n","import SingletonScene from \"../SingletonScene\";\r\nimport { J4_NormalTexture } from \"../Lib/J4_NormalTexture\";\r\nimport { J5_AlphaBlending } from \"../Lib/J5_AlphaBlending\";\r\n\r\nexport class J5_AlphaBlending_Scene extends SingletonScene{\r\n    constructor(){\r\n        super();\r\n\r\n        this.init();\r\n    }\r\n   init() {\r\n\r\n        //初始化Shader\r\n        J4_NormalTexture.initShader();\r\n        J5_AlphaBlending.initShader();\r\n\r\n        //添加场景\r\n        Laya.Scene3D.load(\"res/models/lightMap/lightMap.ls\", Laya.Handler.create(this, function(scene) {\r\n            this.AutoSetScene3d(scene);\r\n            scene.ambientColor = new Laya.Vector3(0.0, 0.0, 0.0);\r\n            console.log(scene);\r\n\r\n            var directionLight = scene.addChild(new Laya.DirectionLight());\r\n            directionLight.color = new Laya.Vector3(1.0, 1.0, 1.0);\r\n            directionLight.transform.worldMatrix.setForward(new Laya.Vector3(-2, -2, 0));\r\n\r\n            var material = new J4_NormalTexture();\r\n            var alphaBlendMat = new J5_AlphaBlending();\r\n            alphaBlendMat.renderQueue = 3000;\r\n\r\n            scene.getChildAt(1).getChildAt(0).meshRenderer.material = material; \r\n            scene.getChildAt(1).getChildAt(1).meshRenderer.material = alphaBlendMat; \r\n            scene.getChildAt(1).getChildAt(1).active = true; \r\n            scene.getChildAt(2).meshRenderer.material = material; \r\n\r\n            Laya.Texture2D.load(\"res/textures/Wall02_Diffuse.png\", Laya.Handler.create(this, function(tex) {\r\n                material.DiffuseTexture = tex;\r\n                console.log(tex);\r\n            }));\t\t\r\n            Laya.Texture2D.load(\"res/textures/Wall02_Normal.png\", Laya.Handler.create(this, function(tex) {\r\n                material.normalTexture = tex;\r\n                console.log(tex);\r\n            }));\r\n            material.TilingOffset = new Laya.Vector4(2.0, 1.0, 0.0, 0.0);\r\n\r\n            Laya.Texture2D.load(\"res/textures/transparentTex.png\", Laya.Handler.create(this, function(tex) {\r\n                alphaBlendMat.DiffuseTexture = tex;\r\n                console.log(tex);\r\n            }));\r\n\r\n            Laya.timer.frameLoop(1, this, function() {scene.getChildAt(1).transform.rotate(new Laya.Vector3(0, 0.005, 0), false);});\r\n\r\n        }));\r\n    }\r\n}","export class J6_LightMap extends Laya.Material {\r\n    static LightMap: any;\r\n    static DiffuseTexture: any;\r\n    constructor() {\r\n        super();\r\n        //设置本材质使用的shader名字\r\n        this.setShaderName(\"J4_LightMapShader\");\r\n        //J6_LightMap.TilingOffset = new Laya.Vector4(1.0, 1.0, 0.0, 0.0);\r\n    }\r\n    static __init__() {\r\n        J6_LightMap.LightMap = Laya.Shader3D.propertyNameToID(\"u_LightMap\");\r\n        J6_LightMap.DiffuseTexture = Laya.Shader3D.propertyNameToID(\"u_DiffuseTexture\");\r\n        //J6_LightMap.TilingOffset = Laya.Shader3D.propertyNameToID(\"u_TilingOffset\");\r\n    }\r\n\r\n    get LightMap() { return this._shaderValues.getTexture(J6_LightMap.LightMap); }\r\n    set LightMap(value) { this._shaderValues.setTexture(J6_LightMap.LightMap, value); }\r\n\r\n    get DiffuseTexture() { return this._shaderValues.getTexture(J6_LightMap.DiffuseTexture); }\r\n    set DiffuseTexture(value) { this._shaderValues.setTexture(J6_LightMap.DiffuseTexture, value); }\r\n\r\n    //get LightmapScaleOffset() {return this._shaderValues.getVector(J6_LightMap.LightmapScaleOffset);}\r\n    //set LightmapScaleOffset(value) {this._shaderValues.setVector(J6_LightMap.LightmapScaleOffset, value);}\r\n\r\n    //初始化我们的自定义shader\r\n    static initShader() {\r\n\r\n        J6_LightMap.__init__()\r\n\r\n        //所有的attributeMap属性\r\n        var attributeMap =\r\n        {\r\n            'a_Position': Laya.VertexMesh.MESH_POSITION0,\r\n            'a_Normal': Laya.VertexMesh.MESH_NORMAL0,\r\n            'a_Texcoord0': Laya.VertexMesh.MESH_TEXTURECOORDINATE0,\r\n            'a_Texcoord1': Laya.VertexMesh.MESH_TEXTURECOORDINATE1,\r\n        };\r\n\r\n        //所有的uniform属性\r\n        var uniformMap =\r\n        {\r\n            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_CameraPos': Laya.Shader3D.PERIOD_CAMERA,     //相机位置\r\n            'u_LightBuffer': Laya.Shader3D.PERIOD_SCENE,\r\n\r\n            'u_AmbientColor': Laya.Shader3D.PERIOD_SCENE,      //环境光\r\n            'u_DiffuseTexture': Laya.Shader3D.PERIOD_MATERIAL, //漫反射贴图\r\n            'u_TilingOffset': Laya.Shader3D.PERIOD_MATERIAL,   //UV坐标属性\r\n            'u_LightmapScaleOffset': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_LightMap': Laya.Shader3D.PERIOD_SPRITE,  //光照贴图\r\n        };\r\n\r\n        let VS = `\r\n            #include \"Lighting.glsl\";\r\n\r\n            attribute vec4 a_Position;\r\n            attribute vec3 a_Normal;\r\n            attribute vec2 a_Texcoord0;\r\n            attribute vec2 a_Texcoord1;\r\n\r\n            uniform mat4 u_MvpMatrix;\r\n            uniform mat4 u_WorldMat;\r\n            uniform vec3 u_CameraPos;\r\n            uniform vec4 u_TilingOffset;\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n            varying vec2 v_Texcoord0;\r\n\r\n            varying vec2 v_LightMapUV;\r\n\r\n            void main()\r\n            {\r\n                v_Texcoord0 = a_Texcoord0;\r\n\r\n                v_LightMapUV = a_Texcoord1;\r\n\r\n                mat3 worldMat = mat3(u_WorldMat);\r\n                v_Normal = worldMat * a_Normal;\r\n\r\n                vec3 WorldPosition = (worldMat * a_Position.xyz).xyz;   //物体空间转到世界空间\r\n                v_ViewDir = u_CameraPos - WorldPosition;    //相机视角\r\n\r\n                gl_Position = u_MvpMatrix * a_Position;\r\n\r\n            } `;\r\n\r\n        let FS = `\r\n\r\n            #ifdef FSHIGHPRECISION\r\n                precision highp float;\r\n            #else\r\n                precision mediump float;\r\n            #endif\r\n            \r\n            #include \"Lighting.glsl\";\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n            varying vec2 v_Texcoord0;\r\n            varying vec2 v_LightMapUV;\r\n\r\n            uniform vec3 u_AmbientColor;   //环境光\r\n\r\n            uniform sampler2D u_DiffuseTexture;\r\n            uniform sampler2D u_LightMap;\r\n\r\n            uniform sampler2D u_LightBuffer;\r\n\r\n            void main()\r\n            {   \r\n\r\n                DirectionLight directionLight = getDirectionLight(u_LightBuffer,0);\r\n                vec3 lightVec = normalize(directionLight.direction);\r\n                vec3 lightColor = directionLight.color;\r\n\r\n                vec3 ViewDir = normalize(v_ViewDir);\r\n                vec3 normal = normalize(v_Normal);\r\n\r\n                float ln = max (0.0, dot (lightVec,v_Normal));  \r\n                ln = ln*0.5 + 0.5; \r\n                vec3 diffuseColor = vec3(1.0, 1.0, 1.0);\r\n\r\n                vec4 difTex = texture2D(u_DiffuseTexture, v_Texcoord0);\r\n                vec4 LightMap = texture2D(u_DiffuseTexture, v_LightMapUV);\r\n\r\n                vec3 diffuse = difTex.rgb * diffuseColor * lightColor * ln;\r\n        \r\n                vec3 specColor = vec3(1.0, 1.0, 1.0);\r\n                float specularIntensity = 0.1;\r\n                float gloss = 0.2;\r\n\r\n                //BlinnPhone计算公式\r\n                vec3 h = normalize(ViewDir - lightVec);\r\n                float nh = max (0.0, dot (h,normal));\r\n                vec3 specular = specColor * lightColor * pow (nh, specularIntensity*128.0) * gloss;\r\n\r\n                gl_FragColor = vec4(LightMap.rgb, 1.0);\r\n\r\n            }`;\r\n\r\n        //注册CustomShader \r\n        var LightSh = Laya.Shader3D.add(\"J4_LightMapShader\");\r\n\r\n        //创建一个SubShader\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n\r\n        //我们的自定义shader customShader中添加我们新创建的subShader\r\n        LightSh.addSubShader(subShader);\r\n\r\n        //往新创建的subShader中添加shaderPass\r\n        subShader.addShaderPass(VS, FS);\r\n    }\r\n}\r\n","import SingletonScene from \"../SingletonScene\";\r\nimport { J6_LightMap } from \"../Lib/J6_LightMap\";\r\n/*\r\nlightMap这块有bug\r\n1.只有在unity场景已经烘焙了lightmap的情况下，才可以导出mesh的UV2信息，但受LightmapScaleOffset属性的影响，直接在shader里边调用uv2，会发生错位现像。\r\n2.在模型由uv2的情况下，正常导出mesh，不会携带uv2信息。\r\n*/\r\n\r\nexport class J6_LightMap_Scene extends SingletonScene{\r\n    constructor(){\r\n        super();\r\n\r\n        this.init();\r\n    }\r\n    init() {\r\n\r\n        //初始化Shader\r\n        J6_LightMap.initShader();\r\n\r\n        //添加场景\r\n        Laya.Scene3D.load(\"res/models/lightMap/lightMap.ls\", Laya.Handler.create(this, function(scene) {\r\n            this.AutoSetScene3d(scene);\r\n            scene.ambientColor = new Laya.Vector3(0.0, 0.0, 0.0);\r\n            console.log(scene);\r\n\r\n            var directionLight = scene.addChild(new Laya.DirectionLight());\r\n            directionLight.color = new Laya.Vector3(1.0, 1.0, 1.0);\r\n            directionLight.transform.worldMatrix.setForward(new Laya.Vector3(-2, -2, 0));\r\n\r\n            var LightMapMat01 = new J6_LightMap();\r\n            var LightMapMat02 = new J6_LightMap();\r\n\r\n            console.log(scene.getChildAt(2));\r\n\r\n            scene.getChildAt(1).getChildAt(0).meshRenderer.material = LightMapMat01; \r\n            scene.getChildAt(2).meshRenderer.material = LightMapMat02; \r\n            \r\n            //关闭显示\r\n            //scene.getChildAt(1).getChildAt(0).meshRenderer.enable = false;\r\n            //scene.getChildAt(1).getChildAt(1).meshRenderer.enable = false;\r\n\r\n            Laya.Texture2D.load(\"res/models/lightMap/Assets/A-mesh/lightMap/Lightmap-1_comp_light.png\", Laya.Handler.create(this, function(tex) {\r\n                LightMapMat01.DiffuseTexture = tex;\r\n                console.log(tex);\r\n            }));\r\n\r\n            Laya.Texture2D.load(\"res/models/lightMap/Assets/A-mesh/lightMap/Lightmap-0_comp_light.png\", Laya.Handler.create(this, function(tex) {\r\n                LightMapMat02.DiffuseTexture = tex;\r\n                console.log(tex);\r\n            }));\t\t\r\n\r\n            //Laya.timer.frameLoop(1, this, function() {scene.transform.rotate(new Laya.Vector3(0, 0.005, 0), false);});\r\n\r\n        }));\r\n    }\r\n}","import SingletonScene from \"../SingletonScene\";\r\n//import { J6_shadow } from \"../Lib/J6_shadow\";\r\n/*\r\nlightMap这块有bug\r\n1.只有在unity场景已经烘焙了lightmap的情况下，才可以导出mesh的UV2信息，但受LightmapScaleOffset属性的影响，直接在shader里边调用uv2，会发生错位现像。\r\n2.在模型由uv2的情况下，正常导出mesh，不会携带uv2信息。\r\n*/\r\n\r\nexport class J6_shadow_Scene extends SingletonScene{\r\n    constructor(){\r\n        super();\r\n\r\n        this.init();\r\n    }\r\n    init() {\r\n\r\n        //初始化Shader\r\n        window['J6_shadow_initShader']();\r\n\r\n        //添加场景\r\n        Laya.Scene3D.load(\"res/models/lightMap/lightMap.ls\", Laya.Handler.create(this, function(scene) {\r\n            this.AutoSetScene3d(scene);\r\n            scene.ambientColor = new Laya.Vector3(0.0, 0.0, 0.0);\r\n            console.log(scene);\r\n\r\n            var directionLight = scene.addChild(new Laya.DirectionLight());\r\n            directionLight.color = new Laya.Vector3(1.0, 1.0, 1.0);\r\n            directionLight.transform.worldMatrix.setForward(new Laya.Vector3(-2, -2, 0));\r\n\r\n            //灯光开启阴影\r\n            directionLight.shadow = true;\r\n            //可见阴影距离\r\n            directionLight.shadowDistance = 10;\r\n            //生成阴影贴图尺寸\r\n            directionLight.shadowResolution = 4096;\r\n            //生成阴影贴图数量\r\n            directionLight.shadowPSSMCount = 1;\r\n            //模糊等级,越大越高,更耗性能\r\n            directionLight.shadowPCFType = 3;\r\n\r\n            var shadowMat01 = new window['NewJ6_shadow']();\r\n            var shadowMat02 = new window['NewJ6_shadow']();\r\n\r\n            console.log(scene.getChildAt(2));\r\n\r\n            scene.getChildAt(1).getChildAt(0).meshRenderer.material = shadowMat01; \r\n            scene.getChildAt(1).getChildAt(0).meshRenderer.castShadow = true\r\n            scene.getChildAt(1).getChildAt(0).meshRenderer.receiveShadow = true\r\n\r\n            scene.getChildAt(2).meshRenderer.material = shadowMat02; \r\n            scene.getChildAt(2).meshRenderer.receiveShadow = true;\r\n\r\n            Laya.Texture2D.load(\"res/textures/Wall02_Diffuse.png\", Laya.Handler.create(this, function(tex) {\r\n                shadowMat01.DiffuseTexture = tex;\r\n                shadowMat02.DiffuseTexture = tex;\r\n                console.log(tex);\r\n            }));\r\n\r\n            //Laya.timer.frameLoop(1, this, function() {scene.transform.rotate(new Laya.Vector3(0, 0.005, 0), false);});\r\n\r\n        }));\r\n    }\r\n}","export class J7_AnimUV extends Laya.Material {\r\n    static DiffuseTexture :any;\r\n    static TilingOffset :any;\r\n    get DiffuseTexture() {return this._shaderValues.getTexture(J7_AnimUV.DiffuseTexture);}\r\n    set DiffuseTexture(value) {this._shaderValues.setTexture(J7_AnimUV.DiffuseTexture, value);}\r\n\r\n    get TilingOffset() {return this._shaderValues.getVector(J7_AnimUV.TilingOffset);}\r\n    set TilingOffset(value) {this._shaderValues.setVector(J7_AnimUV.TilingOffset, value);}\r\n\r\n    constructor() \r\n    { \r\n        super(); \r\n        //设置本材质使用的shader名字\r\n        this.setShaderName(\"J7_AnimUVShader\");\r\n        this.TilingOffset = new Laya.Vector4(1.0, 1.0, 0.0, 0.0);\r\n    }\r\n\r\n    //初始化我们的自定义shader\r\n    static initShader() {\r\n\r\n        //所有的attributeMap属性\r\n        var attributeMap = \r\n        {\r\n            'a_Position': Laya.VertexMesh.MESH_POSITION0, \r\n            'a_Normal': Laya.VertexMesh.MESH_NORMAL0,\r\n            'a_Texcoord0': Laya.VertexMesh.MESH_TEXTURECOORDINATE0,\r\n        };\r\n\r\n        //所有的uniform属性\r\n        var uniformMap = \r\n        {\r\n            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_CameraPos': Laya.Shader3D.PERIOD_CAMERA,     //相机位置\r\n\r\n            'u_AmbientColor': Laya.Shader3D.PERIOD_SCENE,      //环境光\r\n            'u_DiffuseTexture': Laya.Shader3D.PERIOD_MATERIAL, //漫反射贴图\r\n            'u_TilingOffset': Laya.Shader3D.PERIOD_MATERIAL,   //UV坐标属性\r\n            'u_Time': Laya.Shader3D.PERIOD_SCENE,            //时间变量\r\n\r\n            'u_ViewProjection': Laya.Shader3D.PERIOD_CAMERA,     //视图矩阵x投影矩阵\r\n\r\n        };\r\n\r\n        let VS = `\r\n            #include \"Lighting.glsl\";\r\n\r\n            attribute vec4 a_Position;\r\n            attribute vec3 a_Normal;\r\n            attribute vec2 a_Texcoord0;\r\n            attribute vec4 a_MvpMatrix;\r\n\r\n            uniform mat4 u_MvpMatrix;\r\n            uniform mat4 u_WorldMat;\r\n            uniform vec3 u_CameraPos;\r\n            uniform vec4 u_TilingOffset;\r\n            uniform float u_Time;\r\n            uniform mat4 u_ViewProjection;\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n            varying vec2 v_Texcoord0;\r\n            varying float v_Frequency;\r\n\r\n            void main()\r\n            {\r\n                //Frequency频率\r\n                v_Frequency = (u_Time * 0.05);\r\n                v_Texcoord0 = a_Texcoord0;\r\n\r\n                mat3 worldMat = mat3(u_WorldMat);\r\n                v_Normal = worldMat * a_Normal;\r\n\r\n                vec4 Position = a_Position;\r\n\r\n                //Magnitude 振幅\r\n                float _Magnitude = 0.00051;\r\n\r\n                //WaveLen 波长\r\n                float _WaveLen = 300.0;\r\n\r\n                Position.y += sin(u_Time*2.0 + Position.x*_WaveLen + Position.y*_WaveLen)*_Magnitude;\r\n\r\n                vec3 WorldPosition = (worldMat * a_Position.xyz).xyz;   //物体空间转到世界空间\r\n                v_ViewDir = u_CameraPos - WorldPosition;    //相机视角\r\n\r\n                gl_Position = u_MvpMatrix * Position;\r\n\r\n            } `;\r\n\r\n        let FS = `\r\n\r\n            #ifdef FSHIGHPRECISION\r\n                precision highp float;\r\n            #else\r\n                precision mediump float;\r\n            #endif\r\n            \r\n            #include \"Lighting.glsl\";\r\n\r\n            varying vec2 v_Texcoord0;\r\n            varying float v_Frequency;\r\n            \r\n            uniform sampler2D u_DiffuseTexture;\r\n\r\n            void main()\r\n            {\r\n                vec3 diffuseColor = vec3(0.4, 0.4, 0.6);\r\n                vec3 diffuseColor2 = vec3(0.4, 0.6, 0.4);\r\n\r\n                vec2 Tiling = v_Texcoord0 * 2.0;\r\n\r\n                //UV纹理动画\r\n                //vec3 diffuse = texture2D(u_DiffuseTexture, Tiling + v_Frequency).rgb;\r\n\r\n                vec2 rimPanningU = (Tiling + v_Frequency * vec2(1.1,0));\r\n                vec2 rimPanningV = (Tiling + v_Frequency * vec2(0,0.8));\r\n\r\n                float rimTexRU = texture2D(u_DiffuseTexture, rimPanningU).r;\r\n                float rimTexRV = texture2D(u_DiffuseTexture, rimPanningV).r;\r\n\r\n                float rimTexBU = texture2D(u_DiffuseTexture, rimPanningU).g;\r\n                float rimTexBV = texture2D(u_DiffuseTexture, rimPanningV).g;\r\n\r\n                float rimTexR = 1.0 - (rimTexRU - rimTexRV); \r\n                float rimTexB = 1.0 - (rimTexBU - rimTexBV); \r\n\r\n                vec3 diffuse = diffuseColor * rimTexR*0.5 + diffuseColor2 * rimTexB*0.5;\r\n        \r\n                gl_FragColor = vec4(diffuse, 1.0);\r\n\r\n            }`;\r\n\r\n        //注册CustomShader \r\n        var LightSh = Laya.Shader3D.add(\"J7_AnimUVShader\");\r\n\r\n        //创建一个SubShader\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n\r\n        //我们的自定义shader customShader中添加我们新创建的subShader\r\n        LightSh.addSubShader(subShader);\r\n\r\n        //往新创建的subShader中添加shaderPass\r\n        subShader.addShaderPass(VS, FS);\r\n    }\r\n\r\n}\r\n\r\nJ7_AnimUV.DiffuseTexture = Laya.Shader3D.propertyNameToID(\"u_DiffuseTexture\");\r\nJ7_AnimUV.TilingOffset = Laya.Shader3D.propertyNameToID(\"u_TilingOffset\");\r\n","import SingletonScene from \"../SingletonScene\";\r\nimport { J7_AnimUV } from \"../Lib/J7_AnimUV\";\r\n\r\nexport class J7_AnimUV_Scene extends SingletonScene{\r\n    constructor(){\r\n        super();\r\n\r\n        this.init();\r\n    }\r\n    init() {\r\n\r\n        //初始化Shader\r\n        J7_AnimUV.initShader();\r\n\r\n        //添加场景\r\n        Laya.Scene3D.load(\"res/models/lightMap/lightMap.ls\", Laya.Handler.create(this, function(scene) {\r\n            this.AutoSetScene3d(scene);\r\n            scene.ambientColor = new Laya.Vector3(0.0, 0.0, 0.0);\r\n            console.log(scene);\r\n\r\n            var directionLight = scene.addChild(new Laya.DirectionLight());\r\n            directionLight.color = new Laya.Vector3(1.0, 1.0, 1.0);\r\n            directionLight.transform.worldMatrix.setForward(new Laya.Vector3(-2, -2, 0));\r\n\r\n            var material = new J7_AnimUV();\r\n\r\n            scene.getChildAt(1).getChildAt(0).meshRenderer.material = material; \r\n            scene.getChildAt(1).getChildAt(1).meshRenderer.material = material; \r\n            scene.getChildAt(2).meshRenderer.material = material; \r\n\r\n            //关闭显示\r\n            scene.getChildAt(1).getChildAt(0).meshRenderer.enable = false;\r\n            scene.getChildAt(1).getChildAt(1).meshRenderer.enable = false;\r\n\r\n            Laya.Texture2D.load(\"res/textures/water_normal.jpg\", Laya.Handler.create(this, function(tex) {\r\n                material.DiffuseTexture = tex;\r\n                console.log(tex);\r\n            }));\t\t\r\n\r\n            material.TilingOffset = new Laya.Vector4(2.0, 1.0, 0.0, 0.0);\r\n\r\n            Laya.timer.frameLoop(1, this, function() {scene.getChildAt(1).transform.rotate(new Laya.Vector3(0, 0.005, 0), false);});\r\n\r\n        }));\r\n    }\r\n}","export class J8_MatCap extends Laya.Material {\r\n\r\n    static MatCapTexture : any;\r\n    static TilingOffset : any;\r\n\r\n    get MatCapTexture() {return this._shaderValues.getTexture(J8_MatCap.MatCapTexture);}\r\n    set MatCapTexture(value) {this._shaderValues.setTexture(J8_MatCap.MatCapTexture, value);}\r\n\r\n    get TilingOffset() {return this._shaderValues.getVector(J8_MatCap.TilingOffset);}\r\n    set TilingOffset(value) {this._shaderValues.setVector(J8_MatCap.TilingOffset, value);}\r\n\r\n    constructor() \r\n    { \r\n        super(); \r\n        //设置本材质使用的shader名字\r\n        this.setShaderName(\"J8_MatCapShader\");\r\n        this.TilingOffset = new Laya.Vector4(3.0, 3.0, 0.0, 0.0);\r\n    }\r\n\r\n    static __init__(){\r\n        J8_MatCap.MatCapTexture = Laya.Shader3D.propertyNameToID(\"u_MatCapTexture\");\r\n        J8_MatCap.TilingOffset = Laya.Shader3D.propertyNameToID(\"u_TilingOffset\");\r\n    }\r\n\r\n    //初始化我们的自定义shader\r\n    static initShader() {\r\n\r\n        J8_MatCap.__init__();\r\n\r\n        //所有的attributeMap属性\r\n        var attributeMap = \r\n        {\r\n            'a_Position': Laya.VertexMesh.MESH_POSITION0, \r\n            'a_Normal': Laya.VertexMesh.MESH_NORMAL0,\r\n            'a_Texcoord0': Laya.VertexMesh.MESH_TEXTURECOORDINATE0,\r\n        };\r\n\r\n        //所有的uniform属性\r\n        var uniformMap = \r\n        {\r\n            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_CameraPos': Laya.Shader3D.PERIOD_CAMERA,     //相机位置\r\n            'u_AmbientColor': Laya.Shader3D.PERIOD_SCENE,      //环境光\r\n            'u_MatCapTexture': Laya.Shader3D.PERIOD_MATERIAL, //MatCap贴图\r\n            'u_TilingOffset': Laya.Shader3D.PERIOD_MATERIAL,   //UV坐标属性\r\n        };\r\n\r\n        //注册CustomShader \r\n        var LightSh = Laya.Shader3D.add(\"J8_MatCapShader\");\r\n\r\n        //创建一个SubShader\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n\r\n        //我们的自定义shader customShader中添加我们新创建的subShader\r\n        LightSh.addSubShader(subShader);\r\n\r\n        let VS = `\r\n        #include \"Lighting.glsl\";\r\n\r\n        attribute vec4 a_Position;\r\n        attribute vec3 a_Normal;\r\n        attribute vec2 a_Texcoord0;\r\n\r\n        uniform mat4 u_MvpMatrix;\r\n        uniform mat4 u_WorldMat;\r\n        uniform vec3 u_CameraPos;\r\n        uniform vec4 u_TilingOffset;\r\n\r\n        varying vec3 v_Normal;\r\n        varying vec3 v_ViewDir;\r\n        varying vec2 v_Texcoord0;\r\n        varying mat3 ModelViewMatrix;\r\n\r\n        void main()\r\n        {\r\n            v_Texcoord0=TransformUV(a_Texcoord0,u_TilingOffset);\r\n\r\n            mat3 worldMat = mat3(u_WorldMat);\r\n            v_Normal = worldMat * a_Normal;\r\n\r\n            vec3 WorldPosition = (worldMat * a_Position.xyz).xyz;   //物体空间转到世界空间\r\n            v_ViewDir = u_CameraPos - WorldPosition;    //相机视角\r\n\r\n            ModelViewMatrix = inverse(mat3(u_MvpMatrix)); //逆转置矩阵\r\n\r\n            gl_Position = u_MvpMatrix * a_Position;\r\n\r\n        } `;\r\n\r\n        let FS = `\r\n\r\n        #ifdef FSHIGHPRECISION\r\n            precision highp float;\r\n        #else\r\n            precision mediump float;\r\n        #endif\r\n        \r\n        #include \"Lighting.glsl\";\r\n\r\n        varying vec3 v_Normal;\r\n        varying vec3 v_ViewDir;\r\n        varying vec2 v_Texcoord0;\r\n        varying mat3 ModelViewMatrix;\r\n\r\n        uniform vec3 u_AmbientColor;   //环境光\r\n\r\n        uniform sampler2D u_MatCapTexture;\r\n\r\n        void main()\r\n        {   \r\n            vec3 ViewDir = normalize(v_ViewDir);\r\n            vec3 normal = normalize(v_Normal);\r\n\r\n            vec3 ViewNormal = vec3( dot(normal, normalize(ModelViewMatrix[0])), dot(normal, normalize(ModelViewMatrix[1])), 1.0);\r\n            //vec2 matCapUV = ViewNormal.xy*0.5+0.5;  //从[-1,1]映射到[0,1]\r\n\r\n            vec3 r = reflect(ViewDir, ViewNormal);\r\n            float m = 2.0 * sqrt(r.x * r.x + r.y * r.y + (r.z + 1.0) * (r.z + 1.0));\r\n            vec2 matCapUV = r.xy/m + 0.5;\r\n\r\n            vec3 MatCapDiffuse = texture2D(u_MatCapTexture, matCapUV).rgb;\r\n\r\n            vec4 difTex = texture2D(u_MatCapTexture, v_Texcoord0);\r\n\r\n            gl_FragColor = vec4(MatCapDiffuse.rgb, 1.0);\r\n\r\n        }`;\r\n\r\n        //往新创建的subShader中添加shaderPass\r\n        subShader.addShaderPass(VS, FS);\r\n\r\n    }\r\n}\r\n\r\n\r\n","export class J8_MatCapAudi extends Laya.Material {\r\n\r\n    static MatCapTexture: any;\r\n    static OccMap: any;\r\n    static MainColor: any;\r\n    static TilingOffset: any;\r\n\r\n    get MatCapTexture() { return this._shaderValues.getTexture(J8_MatCapAudi.MatCapTexture); }\r\n    set MatCapTexture(value) { this._shaderValues.setTexture(J8_MatCapAudi.MatCapTexture, value); }\r\n\r\n    get OccMap() { return this._shaderValues.getTexture(J8_MatCapAudi.OccMap); }\r\n    set OccMap(value) { this._shaderValues.setTexture(J8_MatCapAudi.OccMap, value); }\r\n\r\n    get MainColor() :any{ return this._shaderValues.getVector(J8_MatCapAudi.MainColor); }\r\n    set MainColor(value:any) { this._shaderValues.setVector(J8_MatCapAudi.MainColor, value); }\r\n\r\n    get TilingOffset() { return this._shaderValues.getVector(J8_MatCapAudi.TilingOffset); }\r\n    set TilingOffset(value) { this._shaderValues.setVector(J8_MatCapAudi.TilingOffset, value); }\r\n\r\n    constructor() {\r\n        super();\r\n        //设置本材质使用的shader名字\r\n        this.setShaderName(\"J8_MatCapAudiShader\");\r\n        this.TilingOffset = new Laya.Vector4(1.0, 1.0, 0.0, 0.0);\r\n        this.MainColor = new Laya.Vector3(0.5, 0.5, 0.5);\r\n    }\r\n    static __init__() {\r\n        J8_MatCapAudi.MatCapTexture = Laya.Shader3D.propertyNameToID(\"u_MatCapTexture\");\r\n        J8_MatCapAudi.OccMap = Laya.Shader3D.propertyNameToID(\"u_OccMap\");\r\n        J8_MatCapAudi.TilingOffset = Laya.Shader3D.propertyNameToID(\"u_TilingOffset\");\r\n        J8_MatCapAudi.MainColor = Laya.Shader3D.propertyNameToID(\"u_MainColor\");\r\n    }\r\n\r\n    //初始化我们的自定义shader\r\n    static initShader() {\r\n\r\n        J8_MatCapAudi.__init__();\r\n\r\n        //所有的attributeMap属性\r\n        var attributeMap =\r\n        {\r\n            'a_Position': Laya.VertexMesh.MESH_POSITION0,\r\n            'a_Normal': Laya.VertexMesh.MESH_NORMAL0,\r\n            'a_Texcoord0': Laya.VertexMesh.MESH_TEXTURECOORDINATE0,\r\n        };\r\n\r\n        //所有的uniform属性\r\n        var uniformMap =\r\n        {\r\n            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_CameraPos': Laya.Shader3D.PERIOD_CAMERA,     //相机位置\r\n            'u_AmbientColor': Laya.Shader3D.PERIOD_SCENE,      //环境光\r\n            'u_OccMap': Laya.Shader3D.PERIOD_MATERIAL, //Occ贴图\r\n            'u_MatCapTexture': Laya.Shader3D.PERIOD_MATERIAL, //MatCap贴图\r\n            'u_TilingOffset': Laya.Shader3D.PERIOD_MATERIAL,   //UV坐标属性\r\n            'u_MainColor': Laya.Shader3D.PERIOD_MATERIAL,   //颜色属性\r\n\r\n        };\r\n\r\n        //注册CustomShader \r\n        var LightSh = Laya.Shader3D.add(\"J8_MatCapAudiShader\");\r\n\r\n        //创建一个SubShader\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n\r\n        //我们的自定义shader customShader中添加我们新创建的subShader\r\n        LightSh.addSubShader(subShader);\r\n\r\n        let VS = `\r\n        #include \"Lighting.glsl\";\r\n\r\n        attribute vec4 a_Position;\r\n        attribute vec3 a_Normal;\r\n        attribute vec2 a_Texcoord0;\r\n\r\n        uniform mat4 u_MvpMatrix;\r\n        uniform mat4 u_WorldMat;\r\n        uniform vec3 u_CameraPos;\r\n        uniform vec4 u_TilingOffset;\r\n\r\n        varying vec3 v_Normal;\r\n        varying vec3 v_ViewDir;\r\n        varying vec2 v_Texcoord0;\r\n        varying mat3 ModelViewMatrix;\r\n\r\n        void main()\r\n        {\r\n            v_Texcoord0=TransformUV(a_Texcoord0,u_TilingOffset);\r\n\r\n            mat3 worldMat = mat3(u_WorldMat);\r\n            v_Normal = worldMat * a_Normal;\r\n\r\n            vec3 WorldPosition = (worldMat * a_Position.xyz).xyz;   //物体空间转到世界空间\r\n            v_ViewDir = u_CameraPos - WorldPosition;    //相机视角\r\n\r\n            ModelViewMatrix = inverse(mat3(u_MvpMatrix)); //逆转置矩阵\r\n\r\n            gl_Position = u_MvpMatrix * a_Position;\r\n\r\n        } `;\r\n\r\n        let FS = `\r\n\r\n        #ifdef FSHIGHPRECISION\r\n            precision highp float;\r\n        #else\r\n            precision mediump float;\r\n        #endif\r\n        \r\n        #include \"Lighting.glsl\";\r\n\r\n        varying vec3 v_Normal;\r\n        varying vec3 v_ViewDir;\r\n        varying vec2 v_Texcoord0;\r\n        varying mat3 ModelViewMatrix;\r\n\r\n        uniform vec3 u_AmbientColor;   //环境光\r\n        uniform vec3 u_MainColor;\r\n\r\n        uniform sampler2D u_MatCapTexture;\r\n        uniform sampler2D u_OccMap;\r\n\r\n        void main()\r\n        {   \r\n            vec3 ViewDir = normalize(v_ViewDir);\r\n            vec3 normal = normalize(v_Normal);\r\n\r\n            vec3 ViewNormal = vec3( dot(normal, normalize(ModelViewMatrix[0])), dot(normal, normalize(ModelViewMatrix[1])), 1.0);\r\n            //vec2 matCapUV = ViewNormal.xy*0.5+0.5;  //从[-1,1]映射到[0,1]\r\n\r\n            vec3 r = reflect(ViewDir, ViewNormal);\r\n            float m = 2.0 * sqrt(r.x * r.x + r.y * r.y + (r.z + 1.0) * (r.z + 1.0));\r\n            vec2 matCapUV = r.xy/m + 0.5;\r\n\r\n            vec3 MatCap = texture2D(u_MatCapTexture, matCapUV).rgb;\r\n            vec3 OccMap= texture2D(u_OccMap, v_Texcoord0).rgb;\r\n            vec3 color = vec3(u_MainColor + OccMap *MatCap);\r\n\r\n            gl_FragColor = vec4(color, 1.0);\r\n\r\n        }`;\r\n\r\n        //往新创建的subShader中添加shaderPass\r\n        var ShaderPass = subShader.addShaderPass(VS, FS);\r\n\r\n        ShaderPass.renderState.cull = 2;//Laya.RenderState.CULL_BACK;\r\n        ShaderPass.renderState.depthWrite = true;\r\n        ShaderPass.renderState.depthTest = 515;//Laya.RenderState.DEPTHTEST_LEQUAL;\r\n\r\n    }\r\n}\r\n","import SingletonScene from \"../SingletonScene\";\r\nimport { J8_MatCap } from \"../Lib/J8_MatCap\";\r\nimport { J8_MatCapAudi } from \"../Lib/J8_MatCapAudi\";\r\nimport { J3_DiffusePixe } from \"../Lib/J3_DiffusePixe\";\r\nimport { J4_DiffuseTexture } from \"../Lib/J4_DiffuseTexture\";\r\n\r\nexport class J8_MatCap_Scene extends SingletonScene {\r\n    constructor() {\r\n        super();\r\n\r\n        this.init();\r\n    }\r\n    init() {\r\n\r\n        //初始化Shader\r\n        J8_MatCap.initShader();\r\n        J8_MatCapAudi.initShader();\r\n        J3_DiffusePixe.initShader();\r\n        J4_DiffuseTexture.initShader();\r\n\r\n        //添加场景\r\n        /*Laya.Scene3D.load(\"res/models/lightMap/lightMap.ls\", Laya.Handler.create(this, function(scene) {\r\n            Laya.stage.addChild(scene);\r\n            scene.ambientColor = new Laya.Vector3(0.0, 0.0, 0.0);\r\n            console.log(scene);\r\n\r\n            var directionLight = scene.addChild(new Laya.DirectionLight());\r\n            directionLight.color = new Laya.Vector3(1.0, 1.0, 1.0);\r\n            directionLight.transform.worldMatrix.setForward(new Laya.Vector3(-2, -2, 0));\r\n\r\n            var material = new J8_MatCap();\r\n            scene.getChildAt(1).getChildAt(0).meshRenderer.material = material; \r\n            scene.getChildAt(1).getChildAt(1).meshRenderer.material = material; \r\n            scene.getChildAt(2).meshRenderer.material = material; \r\n            Laya.Texture2D.load(\"res/textures/matcap017.jpg\", Laya.Handler.create(this, function(tex) {\r\n                material.MatCapTexture = tex;\r\n                console.log(tex);\r\n            }));\r\n            material.TilingOffset = new Laya.Vector4(2.0, 2.0, 0.0, 0.0);\r\n            Laya.timer.frameLoop(1, this, function() {scene.getChildAt(1).transform.rotate(new Laya.Vector3(0, 0.005, 0), false);});\r\n        }));*/\r\n\r\n        //添加场景\r\n        Laya.Scene3D.load(\"res/models/Audi_A4/audiA4.ls\", Laya.Handler.create(this, function (scene) {\r\n            this.AutoSetScene3d(scene);\r\n            scene.ambientColor = new Laya.Vector3(0.0, 0.0, 0.0);\r\n            console.log(scene);\r\n\r\n            var directionLight = scene.addChild(new Laya.DirectionLight());\r\n            directionLight.color = new Laya.Vector3(1.0, 1.0, 1.0);\r\n            directionLight.transform.worldMatrix.setForward(new Laya.Vector3(-2, -2, 0));\r\n\r\n            var bodyMaterial = new J8_MatCapAudi();\r\n            var CarBase = new J3_DiffusePixe();\r\n            var CarFaceMat = new J8_MatCapAudi();\r\n            var CarLineMat = new J8_MatCapAudi();\r\n            var CarGlassMat = new J8_MatCapAudi();\r\n            var CarLunGuMat = new J8_MatCapAudi();\r\n            var CarLunTaiMat = new J8_MatCapAudi();\r\n            var CarTaillight = new J8_MatCapAudi();\r\n            var ZhongKuMat = new J4_DiffuseTexture();\r\n            var DiZuoMat = new J4_DiffuseTexture();\r\n            var groundMat = new J4_DiffuseTexture();\r\n            var windowMat = new J8_MatCapAudi();\r\n\r\n\r\n            scene.getChildAt(1).getChildAt(0).meshRenderer.material = groundMat;\r\n            Laya.Texture2D.load(\"res/models/Audi_A4/Assets/audi_a4/ground_shadow.jpg\", Laya.Handler.create(this, function (tex) { groundMat.DiffuseTexture = tex; }));\r\n\r\n            scene.getChildAt(1).getChildAt(1).meshRenderer.material = bodyMaterial;\r\n            Laya.Texture2D.load(\"res/textures/MatCap/matcap029_B.jpg\", Laya.Handler.create(this, function (tex) { bodyMaterial.MatCapTexture = tex; }));\r\n            Laya.Texture2D.load(\"res/models/Audi_A4/Assets/audi_a4/CarBody.png\", Laya.Handler.create(this, function (tex) { bodyMaterial.OccMap = tex; }));\r\n\r\n            scene.getChildAt(1).getChildAt(2).meshRenderer.material = CarFaceMat;\r\n            CarFaceMat.MainColor = new Laya.Vector3(0.1, 0.1, 0.1);\r\n            Laya.Texture2D.load(\"res/textures/MatCap/matcap019.jpg\", Laya.Handler.create(this, function (tex) { CarFaceMat.MatCapTexture = tex; }));\r\n            Laya.Texture2D.load(\"res/models/Audi_A4/Assets/audi_a4/carFace.jpg\", Laya.Handler.create(this, function (tex) { CarFaceMat.OccMap = tex; }));\r\n\r\n            scene.getChildAt(1).getChildAt(3).meshRenderer.material = CarLineMat;\r\n            scene.getChildAt(1).getChildAt(4).meshRenderer.material = CarLineMat;\r\n            scene.getChildAt(1).getChildAt(5).meshRenderer.material = CarLineMat;\r\n            CarLineMat.MainColor = new Laya.Vector3(0.15, 0.15, 0.15);\r\n            Laya.Texture2D.load(\"res/textures/MatCap/matcap019.jpg\", Laya.Handler.create(this, function (tex) { CarLineMat.MatCapTexture = tex; }));\r\n            Laya.Texture2D.load(\"res/models/Audi_A4/Assets/audi_a4/carline.jpg\", Laya.Handler.create(this, function (tex) { CarLineMat.OccMap = tex; }));\r\n\r\n            scene.getChildAt(1).getChildAt(6).meshRenderer.material = DiZuoMat;\r\n            Laya.Texture2D.load(\"res/models/Audi_A4/Assets/audi_a4/diZuo.png\", Laya.Handler.create(this, function (tex) { DiZuoMat.DiffuseTexture = tex; }));\r\n\r\n            scene.getChildAt(1).getChildAt(7).meshRenderer.material = CarGlassMat;\r\n            CarGlassMat.MainColor = new Laya.Vector3(0.0, 0.0, 0.0);\r\n            Laya.Texture2D.load(\"res/textures/MatCap/matcap019.jpg\", Laya.Handler.create(this, function (tex) { CarGlassMat.MatCapTexture = tex; }));\r\n            Laya.Texture2D.load(\"res/models/Audi_A4/Assets/audi_a4/write.jpg\", Laya.Handler.create(this, function (tex) { CarGlassMat.OccMap = tex; }));\r\n\r\n            scene.getChildAt(1).getChildAt(8).meshRenderer.material = CarLunGuMat;\r\n            scene.getChildAt(1).getChildAt(9).meshRenderer.material = CarLunGuMat;\r\n            scene.getChildAt(1).getChildAt(10).meshRenderer.material = CarLunGuMat;\r\n            scene.getChildAt(1).getChildAt(11).meshRenderer.material = CarLunGuMat;\r\n            CarLunGuMat.MainColor = new Laya.Vector3(0.15, 0.15, 0.15);\r\n            Laya.Texture2D.load(\"res/textures/MatCap/matcap018.jpg\", Laya.Handler.create(this, function (tex) { CarLunGuMat.MatCapTexture = tex; }));\r\n            Laya.Texture2D.load(\"res/models/Audi_A4/Assets/audi_a4/lungu.png\", Laya.Handler.create(this, function (tex) { CarLunGuMat.OccMap = tex; }));\r\n\r\n            scene.getChildAt(1).getChildAt(12).meshRenderer.material = CarLunTaiMat;\r\n            CarLunTaiMat.MainColor = new Laya.Vector3(0.1, 0.1, 0.1);\r\n            Laya.Texture2D.load(\"res/textures/MatCap/matcap020.jpg\", Laya.Handler.create(this, function (tex) { CarLunTaiMat.MatCapTexture = tex; }));\r\n            Laya.Texture2D.load(\"res/models/Audi_A4/Assets/audi_a4/lunTai.png\", Laya.Handler.create(this, function (tex) { CarLunTaiMat.OccMap = tex; }));\r\n\r\n            scene.getChildAt(1).getChildAt(13).meshRenderer.material = CarTaillight;\r\n            CarTaillight.MainColor = new Laya.Vector3(0.6, 0.1, 0.1);\r\n            Laya.Texture2D.load(\"res/textures/MatCap/matcap019.jpg\", Laya.Handler.create(this, function (tex) { CarTaillight.MatCapTexture = tex; }));\r\n            Laya.Texture2D.load(\"res/models/Audi_A4/Assets/audi_a4/write.jpg\", Laya.Handler.create(this, function (tex) { CarTaillight.OccMap = tex; }));\r\n\r\n            scene.getChildAt(1).getChildAt(14).meshRenderer.material = windowMat;\r\n            windowMat.MainColor = new Laya.Vector3(0.0, 0.0, 0.0);\r\n            Laya.Texture2D.load(\"res/textures/MatCap/matcap019.jpg\", Laya.Handler.create(this, function (tex) { windowMat.MatCapTexture = tex; }));\r\n            Laya.Texture2D.load(\"res/models/Audi_A4/Assets/audi_a4/write.jpg\", Laya.Handler.create(this, function (tex) { windowMat.OccMap = tex; }));\r\n\r\n            scene.getChildAt(1).getChildAt(15).meshRenderer.material = ZhongKuMat;\r\n            Laya.Texture2D.load(\"res/models/Audi_A4/Assets/audi_a4/CarID.jpg\", Laya.Handler.create(this, function (tex) { ZhongKuMat.DiffuseTexture = tex; }));\r\n\r\n            Laya.timer.frameLoop(1, this, function () { scene.getChildAt(1).transform.rotate(new Laya.Vector3(0, 0.002, 0), false); });\r\n\r\n        }));\r\n    }\r\n}","export class J8_Reflect extends Laya.Material {\r\n    static ReflectTexture: any;\r\n    static DiffuseTexture: any;\r\n    static TilingOffset: any;\r\n    constructor() {\r\n        super();\r\n        //设置本材质使用的shader名字\r\n        this.setShaderName(\"J8_ReflectShader\");\r\n        this.TilingOffset = new Laya.Vector4(3.0, 3.0, 0.0, 0.0);\r\n    }\r\n\r\n    static __init__() {\r\n\r\n        J8_Reflect.ReflectTexture = Laya.Shader3D.propertyNameToID(\"u_ReflectTexture\");\r\n        J8_Reflect.DiffuseTexture = Laya.Shader3D.propertyNameToID(\"u_DiffuseTexture\");\r\n        J8_Reflect.TilingOffset = Laya.Shader3D.propertyNameToID(\"u_TilingOffset\");\r\n    }\r\n\r\n    get DiffuseTexture() { return this._shaderValues.getTexture(J8_Reflect.DiffuseTexture); }\r\n    set DiffuseTexture(value) { this._shaderValues.setTexture(J8_Reflect.DiffuseTexture, value); }\r\n\r\n    get ReflectTexture() { return this._shaderValues.getTexture(J8_Reflect.ReflectTexture); }\r\n    set ReflectTexture(value) { this._shaderValues.setTexture(J8_Reflect.ReflectTexture, value); }\r\n\r\n    get TilingOffset() { return this._shaderValues.getVector(J8_Reflect.TilingOffset); }\r\n    set TilingOffset(value) { this._shaderValues.setVector(J8_Reflect.TilingOffset, value); }\r\n\r\n    //初始化我们的自定义shader\r\n    static initShader() {\r\n\r\n        J8_Reflect.__init__();\r\n\r\n        //所有的attributeMap属性\r\n        var attributeMap =\r\n        {\r\n            'a_Position': Laya.VertexMesh.MESH_POSITION0,\r\n            'a_Normal': Laya.VertexMesh.MESH_NORMAL0,\r\n            'a_Texcoord0': Laya.VertexMesh.MESH_TEXTURECOORDINATE0,\r\n        };\r\n\r\n        //所有的uniform属性\r\n        var uniformMap =\r\n        {\r\n            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE,\r\n            'u_CameraPos': Laya.Shader3D.PERIOD_CAMERA,     //相机位置\r\n            'u_DiffuseTexture': Laya.Shader3D.PERIOD_MATERIAL, //漫反射贴图\r\n\r\n            'u_AmbientColor': Laya.Shader3D.PERIOD_SCENE,      //环境光\r\n            'u_ReflectTexture': Laya.Shader3D.PERIOD_SCENE, //漫反射贴图\r\n            'u_TilingOffset': Laya.Shader3D.PERIOD_MATERIAL,   //UV坐标属性\r\n        };\r\n\r\n        let VS = `\r\n            #include \"Lighting.glsl\";\r\n\r\n            attribute vec4 a_Position;\r\n            attribute vec3 a_Normal;\r\n            attribute vec2 a_Texcoord0;\r\n\r\n            uniform mat4 u_MvpMatrix;\r\n            uniform mat4 u_WorldMat;\r\n            uniform vec3 u_CameraPos;\r\n            uniform vec4 u_TilingOffset;\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n            varying vec2 v_Texcoord0;\r\n            varying vec3 v_TexcoordCube;\r\n\r\n            void main()\r\n            {\r\n                v_Texcoord0=TransformUV(a_Texcoord0,u_TilingOffset);\r\n\r\n                mat3 worldMat = mat3(u_WorldMat);\r\n                v_Normal = worldMat * a_Normal;\r\n\r\n                vec3 WorldPosition = (worldMat * a_Position.xyz).xyz;   //物体空间转到世界空间\r\n                v_ViewDir = u_CameraPos - WorldPosition;    //相机视角\r\n\r\n                v_TexcoordCube = vec3(-a_Position.x,a_Position.yz);//转换坐标系 \r\n\r\n                gl_Position = u_MvpMatrix * a_Position;\r\n\r\n            } `;\r\n\r\n        let FS = `\r\n\r\n            #ifdef FSHIGHPRECISION\r\n                precision highp float;\r\n            #else\r\n                precision mediump float;\r\n            #endif\r\n            \r\n            #include \"Lighting.glsl\";\r\n\r\n            varying vec3 v_Normal;\r\n            varying vec3 v_ViewDir;\r\n            varying vec2 v_Texcoord0;\r\n            varying vec3 v_TexcoordCube;\r\n\r\n            uniform vec3 u_AmbientColor;   //环境光\r\n            uniform sampler2D u_DiffuseTexture;\r\n\r\n            uniform sampler2D u_ReflectTexture;\r\n\r\n            void main()\r\n            {   \r\n                //vec3 lightVec = normalize(u_DirectionLight.Direction);\r\n                //vec3 lightColor = u_DirectionLight.Color;\r\n                vec3 ViewDir = normalize(v_ViewDir);\r\n                vec3 normal = normalize(v_Normal);\r\n\r\n                //float ln = max (0.0, dot (-lightVec,v_Normal));  \r\n                //ln = ln*0.5 + 0.5; \r\n                vec3 diffuseColor = vec3(1.0, 1.0, 1.0);\r\n\r\n                vec4 difTex = texture2D(u_ReflectTexture, v_Texcoord0);\r\n\r\n                vec3 diffuse = difTex.rgb * diffuseColor;\r\n        \r\n                vec3 incident = -ViewDir;\r\n                vec3 reflectionVector = reflect(incident, normal);\r\n\r\n                vec3 reflectionColor = textureCube(u_ReflectTexture, vec3(-reflectionVector.x, reflectionVector.yz)).rgb;\r\n\r\n                //vec3 reflectionColor = texture2D(u_DiffuseTexture, vec2(reflectionVector.xy)).rgb;\r\n\r\n                gl_FragColor = vec4(reflectionColor, 1.0);\r\n\r\n            }`;\r\n\r\n        //注册CustomShader \r\n        var LightSh = Laya.Shader3D.add(\"J8_ReflectShader\");\r\n\r\n        //创建一个SubShader\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n\r\n        //我们的自定义shader customShader中添加我们新创建的subShader\r\n        LightSh.addSubShader(subShader);\r\n\r\n        //往新创建的subShader中添加shaderPass\r\n        subShader.addShaderPass(VS, FS);\r\n    }\r\n\r\n}\r\n\r\n\r\n","import SingletonScene from \"../SingletonScene\";\r\nimport { J8_Reflect } from \"../Lib/J8_Reflect\";\r\n\r\nexport class J8_Reflect_Scene extends SingletonScene{\r\n    constructor(){\r\n        super();\r\n\r\n        this.init();\r\n    }\r\n    init() {\r\n\r\n        //初始化Shader\r\n        J8_Reflect.initShader();\r\n\r\n        //添加场景\r\n        Laya.Scene3D.load(\"res/models/lightMap/lightMap.ls\", Laya.Handler.create(this, function(scene) {\r\n            this.AutoSetScene3d(scene);\r\n            scene.ambientColor = new Laya.Vector3(0.0, 0.0, 0.0);\r\n            console.log(scene);\r\n\r\n            var directionLight = scene.addChild(new Laya.DirectionLight());\r\n            directionLight.color = new Laya.Vector3(1.0, 1.0, 1.0);\r\n            directionLight.transform.worldMatrix.setForward(new Laya.Vector3(-2, -2, 0));\r\n\r\n            var material = new J8_Reflect();\r\n\r\n            scene.getChildAt(1).getChildAt(0).meshRenderer.material = material; \r\n            scene.getChildAt(1).getChildAt(1).meshRenderer.material = material; \r\n            scene.getChildAt(2).meshRenderer.material = material; \r\n\r\n            //直接这么调用是不行的\r\n            material.ReflectTexture = scene.reflectionTexture;\r\n\r\n            //这么调用也不行\r\n            //Laya.TextureCube.load(\"res/textures/Cubemap/Cubemap_0.ltc\", Laya.Handler.create(this, function(tex) {\r\n\r\n            //    console.log(Laya3D.TextureCube(tex));\r\n            //    material.ReflectTexture = Laya.Laya3D._loadTextureCube(tex);\r\n\r\n            //}));\r\n\r\n            Laya.Texture2D.load(\"res/textures/MatCap/matcap017.jpg\", Laya.Handler.create(this, function(tex) {\r\n                material.DiffuseTexture = tex;\r\n                console.log(tex);\r\n            }));\r\n\r\n            material.TilingOffset = new Laya.Vector4(1.0, 1.0, 0.0, 0.0);\r\n\r\n            Laya.timer.frameLoop(1, this, function() {scene.getChildAt(1).transform.rotate(new Laya.Vector3(0, 0.005, 0), false);});\r\n            Laya.timer.frameLoop(1, this, function() {scene.getChildAt(2).transform.rotate(new Laya.Vector3(0, 0.005, 0), false);});\r\n\r\n        }));\r\n    }\r\n}","import SingletonScene from \"../SingletonScene\";\r\nimport { J8_MatCap } from \"../Lib/J8_MatCap\";\r\n\r\nexport class J9_PostProcess_Scene extends SingletonScene {\r\n    constructor() {\r\n        super();\r\n\r\n        this.init();\r\n    }\r\n    init() {\r\n\r\n        //初始化Shader\r\n        J8_MatCap.initShader();\r\n\r\n        //添加场景\r\n        Laya.Scene3D.load(\"res/models/lightMap/lightMap.ls\", Laya.Handler.create(this, function (scene) {\r\n            this.AutoSetScene3d(scene);\r\n            scene.ambientColor = new Laya.Vector3(0.0, 0.0, 0.0);\r\n            console.log(scene);\r\n\r\n            //获取场景中的相机\r\n            var camera = scene.getChildByName(\"Camera\");\r\n            //加入摄像机移动控制脚本\r\n            // this.camera.addComponent(CameraMoveScript);\r\n            //增加后期处理\r\n            var postProcess = new Laya.PostProcess();\r\n            console.log(postProcess);\r\n\r\n            //增加后期处理泛光效果\r\n            var bloom = new Laya.BloomEffect();\r\n            postProcess.addEffect(bloom);\r\n            camera.postProcess = postProcess;\r\n            camera.enableHDR = true;\r\n            //设置泛光参数\r\n            bloom.intensity = 5.0;\r\n            bloom.threshold = 0.90;\r\n            bloom.softKnee = 0.5;\r\n            bloom.clamp = 65472.0;\r\n            bloom.diffusion = 5.0;\r\n            bloom.anamorphicRatio = 0.0;\r\n            bloom.color = new Laya.Color(1.0, 1.0, 1.0, 1.0);\r\n            bloom.fastMode = true;\r\n            //增加污渍纹理参数\r\n            Laya.Texture2D.load(\"res/textures/LensDirt01.png\", Laya.Handler.create(this, function (tex) {\r\n                bloom.dirtTexture = tex;\r\n                bloom.dirtIntensity = 4.0;\r\n            }));\r\n\r\n            var directionLight = scene.addChild(new Laya.DirectionLight());\r\n            directionLight.color = new Laya.Vector3(1.0, 1.0, 1.0);\r\n            directionLight.transform.worldMatrix.setForward(new Laya.Vector3(-2, -2, 0));\r\n\r\n            var material = new J8_MatCap();\r\n\r\n            scene.getChildAt(1).getChildAt(0).meshRenderer.material = material;\r\n            scene.getChildAt(1).getChildAt(1).meshRenderer.material = material;\r\n            scene.getChildAt(2).meshRenderer.material = material;\r\n\r\n\r\n            Laya.Texture2D.load(\"res/textures/MatCap/matcap017.jpg\", Laya.Handler.create(this, function (tex) {\r\n                material.MatCapTexture = tex;\r\n                console.log(tex);\r\n            }));\r\n\r\n            material.TilingOffset = new Laya.Vector4(2.0, 2.0, 0.0, 0.0);\r\n\r\n            Laya.timer.frameLoop(1, this, function () { scene.getChildAt(1).transform.rotate(new Laya.Vector3(0, 0.005, 0), false); });\r\n\r\n        }));\r\n    }\r\n}","import SingletonMainScene from \"./SingletonMainScene\";\r\nimport { GlobalConfig } from \"./GlobalConfig\";\r\nimport { J3_BlinnPhone_Scene } from \"./Scene/J3_BlinnPhone_Scene\";\r\nimport { J4_DiffuseTexture_Scene } from \"./Scene/J4_DiffuseTexture_Scene\";\r\nimport { J3_DiffusePixe_Scene } from \"./Scene/J3_DiffusePixe_Scene\";\r\nimport { J4_NormalTexture_Scene } from \"./Scene/J4_NormalTexture_Scene\";\r\nimport { J5_AlphaBlending_Scene } from \"./Scene/J5_AlphaBlending_Scene\";\r\nimport { J6_LightMap_Scene } from \"./Scene/J6_LightMap_Scene\";\r\nimport { J6_shadow_Scene } from \"./Scene/J6_Shadow_Scene\";\r\nimport { J7_AnimUV_Scene } from \"./Scene/J7_AnimUV_Scene\";\r\nimport { J8_MatCap_Scene } from \"./Scene/J8_MatCap_Scene\";\r\nimport { J8_Reflect_Scene } from \"./Scene/J8_Reflect_Scene\";\r\nimport { J9_PostProcess_Scene } from \"./Scene/J9_PostProcess_Scene\";\r\n\r\nexport class LayaMainShader extends SingletonMainScene {\r\n    constructor() {\r\n        super();\r\n        Laya.stage.addChild(this);\r\n        this.LoadExamples();\r\n    }\r\n\r\n    private btnNameArr: Array<string> = [\r\n        \"BlinnPhone\", \"DiffusePixe\", \"DiffuseTexture\", \"NormalTexture\", \"AlphaBlending\",\r\n        \"LightMap\", \"Shadow\", \"AnimUV\", \"MatCap\", \"Reflect\",\r\n        \"PostProcess\"\r\n    ];\r\n\r\n    // 加载例子\r\n    LoadExamples() {\r\n        for (let index = 0; index < this.btnNameArr.length; index++) {\r\n            this.createButton(this.btnNameArr[index], this._onclick, index);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param name 按钮名称\r\n     * @param cb 绑定方法\r\n     * @param index index游标\r\n     * @param skin 按钮皮肤\r\n     */\r\n    private createButton(name: string, cb: Function, index: number, skin: string = GlobalConfig.ResPath + \"res/threeDimen/ui/button.png\"): Laya.Button {\r\n        var btn: Laya.Button = new Laya.Button(skin, name);\r\n        btn.on(Laya.Event.CLICK, this, cb, [name]);\r\n        btn.pos(Laya.stage.width - 50, Laya.stage.height - 50);\r\n        btn.size(50, 20);\r\n        btn.name = name;\r\n        btn.right = 5;\r\n        btn.top = index * (btn.height + 5);\r\n        this.addChild(btn);\r\n        return btn;\r\n    }\r\n\r\n    // 绑定点击事件\r\n    private _onclick(name: string) {\r\n        this.Hide();\r\n        switch (name) {\r\n            case this.btnNameArr[0]:\r\n                J3_BlinnPhone_Scene.getInstance().Click();\r\n                break;\r\n            case this.btnNameArr[1]:\r\n                J3_DiffusePixe_Scene.getInstance().Click();\r\n                break;\r\n            case this.btnNameArr[2]:\r\n                J4_DiffuseTexture_Scene.getInstance().Click();\r\n                break;\r\n            case this.btnNameArr[3]:\r\n                J4_NormalTexture_Scene.getInstance().Click();\r\n                break;\r\n            case this.btnNameArr[4]:\r\n                J5_AlphaBlending_Scene.getInstance().Click();\r\n                break;\r\n            case this.btnNameArr[5]:\r\n                J6_LightMap_Scene.getInstance().Click();\r\n                break;\r\n            case this.btnNameArr[6]:\r\n                J6_shadow_Scene.getInstance().Click();\r\n                break;\r\n            case this.btnNameArr[7]:\r\n                J7_AnimUV_Scene.getInstance().Click();\r\n                break;\r\n            case this.btnNameArr[8]:\r\n                J8_MatCap_Scene.getInstance().Click();\r\n                break;\r\n            case this.btnNameArr[9]:\r\n                J8_Reflect_Scene.getInstance().Click();\r\n                break;\r\n            case this.btnNameArr[10]:\r\n                J9_PostProcess_Scene.getInstance().Click();\r\n                break;\r\n        }\r\n        console.log(name + \"按钮_被点击\");\r\n    }\r\n\r\n    public Back2Main() {\r\n        this.Show();\r\n    }\r\n}","import GameConfig from \"./GameConfig\";\r\nimport { LayaMainShader } from \"./LayaMainShader\";\r\nclass Main {\r\n\tconstructor() {\r\n\t\t//根据IDE设置初始化引擎\t\t\r\n\t\tif (window[\"Laya3D\"]) Laya3D.init(GameConfig.width, GameConfig.height);\r\n\t\telse Laya.init(GameConfig.width, GameConfig.height, Laya[\"WebGL\"]);\r\n\t\tLaya[\"Physics\"] && Laya[\"Physics\"].enable();\r\n\t\tLaya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\r\n\t\tLaya.stage.scaleMode = GameConfig.scaleMode;\r\n\t\tLaya.stage.screenMode = GameConfig.screenMode;\r\n\t\tLaya.stage.alignV = GameConfig.alignV;\r\n\t\tLaya.stage.alignH = GameConfig.alignH;\r\n\t\t//兼容微信不支持加载scene后缀场景\r\n\t\tLaya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\r\n\r\n\t\t//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）\r\n\t\tif (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\") Laya.enableDebugPanel();\r\n\t\tif (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"]) Laya[\"PhysicsDebugDraw\"].enable();\r\n\t\tif (GameConfig.stat) Laya.Stat.show();\r\n\t\tLaya.alertGlobalError(true);\r\n\r\n\t\t//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程\r\n\t\tLaya.ResourceVersion.enable(\"version.json\", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);\r\n\t}\r\n\r\n\tonVersionLoaded(): void {\r\n\t\t//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图\r\n\t\tLaya.AtlasInfoManager.enable(\"fileconfig.json\", Laya.Handler.create(this, this.onConfigLoaded));\r\n\t}\r\n\r\n\tonConfigLoaded(): void {\r\n\t\t//加载IDE指定的场景\r\n\t\tGameConfig.startScene && Laya.Scene.open(GameConfig.startScene);\r\n\t}\r\n\r\n\tLoad(): void {\r\n\t\tLayaMainShader.getInstance().LoadExamples();\r\n\t}\r\n}\r\n//激活启动类\r\nnew Main().Load();\r\n"],"names":[],"mappings":"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"}