{"code":"export class EventExtra {\r\n    constructor() {\r\n        this._handerList = new Array();\r\n    }\r\n    Add(handler) {\r\n        this._handerList.push(handler);\r\n    }\r\n    Remove(handler) {\r\n        for (let i = 0; i < this._handerList.length; i++) {\r\n            if (handler.caller == this._handerList[i].caller && handler.method == this._handerList[i].method) {\r\n                this._handerList[i].recover();\r\n                this._handerList.splice(i, 1);\r\n                handler.recover();\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    Exec(args) {\r\n        for (let i = this._handerList.length; i >= 0; i--) {\r\n            let handler = this._handerList[i];\r\n            if (handler != null) {\r\n                try {\r\n                    handler.setTo(handler.caller, handler.method, args, false);\r\n                    handler.run();\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexport class EventManager {\r\n    static DispatchEvent(type, args) {\r\n        if (!(args instanceof Array))\r\n            args = [args];\r\n        let e = EventManager.eventMap.get(type);\r\n        if (e != null || e != undefined) {\r\n            try {\r\n                e.Exec(args);\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n    }\r\n    static RegistEvent(type, handler) {\r\n        let e = EventManager.eventMap.get(type);\r\n        if (e == null || e == undefined) {\r\n            e = new EventExtra();\r\n            EventManager.eventMap.set(type, e);\r\n        }\r\n        e.Add(handler);\r\n    }\r\n    static RemoveEvent(type, handler) {\r\n        let e = EventManager.eventMap.get(type);\r\n        if (e != undefined && handler != null) {\r\n            e.Remove(handler);\r\n        }\r\n    }\r\n}\r\nEventManager.eventMap = new Map();\r\n//# sourceMappingURL=EventManager.js.map","references":[],"map":"{\"version\":3,\"file\":\"EventManager.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/Event/EventManager.ts\"],\"names\":[],\"mappings\":\"AAOA,MAAM,OAAO,UAAU;IAInB;QACI,IAAI,CAAC,WAAW,GAAG,IAAI,KAAK,EAAgB,CAAC;IACjD,CAAC;IAEM,GAAG,CAAC,OAAqB;QAC5B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACnC,CAAC;IAEM,MAAM,CAAC,OAAqB;QAC/B,KAAK,IAAI,CAAC,GAAW,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtD,IAAI,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE;gBAC9F,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;gBAC9B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC9B,OAAO,CAAC,OAAO,EAAE,CAAC;gBAClB,OAAO;aACV;SACJ;IACL,CAAC;IAEM,IAAI,CAAC,IAAW;QACnB,KAAK,IAAI,CAAC,GAAW,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YACvD,IAAI,OAAO,GAAiB,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAChD,IAAI,OAAO,IAAI,IAAI,EAAE;gBACjB,IAAI;oBACA,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;oBAE3D,OAAO,CAAC,GAAG,EAAE,CAAC;iBACjB;gBACD,OAAO,CAAC,EAAE;oBACN,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;iBACpB;aACJ;SACJ;IACL,CAAC;CACJ;AAED,MAAM,OAAO,YAAY;IASd,MAAM,CAAC,aAAa,CAAC,IAAY,EAAE,IAAU;QAChD,IAAI,CAAC,CAAC,IAAI,YAAY,KAAK,CAAC;YACxB,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;QAElB,IAAI,CAAC,GAA2B,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAChE,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,SAAS,EAAE;YAC7B,IAAI;gBACA,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAChB;YACD,OAAO,CAAC,EAAE;gBACN,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;aACpB;SACJ;IACL,CAAC;IAOM,MAAM,CAAC,WAAW,CAAC,IAAY,EAAE,OAAqB;QACzD,IAAI,CAAC,GAA2B,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAChE,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,SAAS,EAAE;YAC7B,CAAC,GAAG,IAAI,UAAU,EAAE,CAAC;YACrB,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;SACtC;QACD,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACnB,CAAC;IAOM,MAAM,CAAC,WAAW,CAAC,IAAY,EAAE,OAAqB;QACzD,IAAI,CAAC,GAA2B,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAChE,IAAI,CAAC,IAAI,SAAS,IAAI,OAAO,IAAI,IAAI,EAAE;YACnC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SACrB;IACL,CAAC;;AA9Cc,qBAAQ,GAA4B,IAAI,GAAG,EAAE,CAAC\"}"}
